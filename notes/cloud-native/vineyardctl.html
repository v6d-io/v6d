<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="vineyardctl" />
<meta property="og:type" content="website" />
<meta property="og:url" content="notes/cloud-native/vineyardctl.html" />
<meta property="og:site_name" content="vineyard" />
<meta property="og:description" content="vineyardctl is the command-line tool for interact with the Vineyard Operator. Synopsis: vineyardctl is the command-line tool for working with the Vineyard Operator. It supports creating, deleting a..." />
<meta name="description" content="vineyardctl is the command-line tool for interact with the Vineyard Operator. Synopsis: vineyardctl is the command-line tool for working with the Vineyard Operator. It supports creating, deleting a..." />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="Data processing" href="../../tutorials/data-processing.html"><link rel="prev" title="Vineyard Operator" href="vineyard-operator.html">
        <link rel="prefetch" href="../../_static/vineyard-logo-h.png" as="image">

    <link rel="shortcut icon" href="../../_static/vineyard.ico"><!-- Generated with Sphinx 8.1.3 and Furo 2025.09.25 -->
        <title>vineyardctl - Vineyard</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css?v=995e94df" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.min.css?v=21c0b90a" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/brands.min.css?v=af964456" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/v4-shims.min.css?v=e329b598" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=11f00004" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/panels.css?v=0f22cee4" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/index.css?v=c31c8fd8" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
<script>
  document.body.dataset.theme = "light";
</script>

<script>
  function ready(callback) {
    if (document.readyState!='loading') {
      // in case the document is already rendered
      callback();
    } else if (document.addEventListener) {
      // modern browsers
      document.addEventListener('DOMContentLoaded', callback);
    } else document.attachEvent('onreadystatechange', function() {
      // IE <= 8
      if (document.readyState=='complete') {
        callback();
      }
    });
  }

  ready(function() {
    let coll = document.getElementsByClassName("admonition-details");
    for (let i = 0; i < coll.length; i++) {
      let titles = coll[i].getElementsByClassName("admonition-title");
      if (titles.length == 0) {
        continue;
      }
      titles[0].addEventListener("click", function () {
        this.parentElement.classList.toggle("active");

        if (this.parentElement.classList.contains("active")) {
          this.getElementsByClassName("admonition-caret")[0].innerText = " - (click to collapse)";
        } else {
          this.getElementsByClassName("admonition-caret")[0].innerText = " + (click to expand)";
        }
      });
      titles[0].appendChild(document.createElement("br"));
      let caret = document.createElement("span");
      caret.classList.add("admonition-caret");
      caret.innerText = " + (click to expand)";
      titles[0].appendChild(caret);
    }
  });
</script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../docs.html"><div class="brand">Vineyard</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../docs.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/vineyard-logo-h.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../key-concepts.html">Key Concepts</a><input aria-label="Toggle navigation of Key Concepts" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../key-concepts/objects.html">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key-concepts/vcdl.html">Code Generation for Boilerplate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key-concepts/data-accessing.html">Data Accessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key-concepts/streams.html">Streams in Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key-concepts/io-drivers.html">I/O Drivers</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-Native</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="deploy-kubernetes.html">Deploy on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vineyard-operator.html">Vineyard Operator</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal">Command-line tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/data-processing.html">Data processing</a><input aria-label="Toggle navigation of Data processing" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/data-processing/using-objects-python.html">Sharing Python Objects with Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/data-processing/python-sharedmemory.html"><code class="code docutils literal notranslate"><span class="pre">multiprocessing.shared_memory</span></code> in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/data-processing/distributed-learning.html">Distributed Learning with Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/data-processing/accelerate-data-sharing-in-kedro.html">Accelerate Data Sharing in Kedro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/data-processing/gpu-memory-sharing.html">Sharing GPU Memory</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/kubernetes.html">Vineyard on Kubernetes</a><input aria-label="Toggle navigation of Vineyard on Kubernetes" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kubernetes/using-vineyard-operator.html">Use vineyard operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kubernetes/ml-pipeline-mars-pytorch.html">Machine learning with Vineyard on Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kubernetes/data-sharing-with-vineyard-on-kubernetes.html">Data sharing with Vineyard on Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kubernetes/efficient-data-sharing-in-kubeflow-with-vineyard-csi-driver.html">Efficient data sharing in Kubeflow with Vineyard CSI Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kubernetes/vineyard-on-fluid.html">Vineyard + Fluid in Action: Train a Linear Regression Model on ACK</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/extending.html">Extending vineyard</a><input aria-label="Toggle navigation of Extending vineyard" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/extending/define-datatypes-python.html">Define Data Types in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/extending/define-datatypes-cpp.html">Defining Custom Data Types in C++</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../integration-bigdata.html">Big-data on Vineyard</a><input aria-label="Toggle navigation of Big-data on Vineyard" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../integration/dask.html">Dask on Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration/ml.html">Machine Learning with Vineyard</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../integration-orchestration.html">Workflow orchestration</a><input aria-label="Toggle navigation of Workflow orchestration" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../integration/airflow.html">Airflow on Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration/kedro.html">Kedro Vineyard Plugin</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../references.html">API Reference</a><input aria-label="Toggle navigation of API Reference" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../references/python-api.html">Python API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/cpp-api.html">C++ API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/crds.html">Kubernetes CRDs</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developers.html">Getting Involved</a><input aria-label="Toggle navigation of Getting Involved" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developers/build-from-source.html">Building from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/contributing.html">Contributing to vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/roadmap.html">Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developers/faq.html">Frequently Asked Questions</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/v6d-io/v6d/blob/main/docs/notes/cloud-native/vineyardctl.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/v6d-io/v6d/edit/main/docs/notes/cloud-native/vineyardctl.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="vineyardctl">
<h1><code class="docutils literal notranslate"><span class="pre">vineyardctl</span></code><a class="headerlink" href="#vineyardctl" title="Link to this heading">¶</a></h1>
<p>vineyardctl is the command-line tool for interact with the Vineyard Operator.</p>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading">¶</a></h2>
<p>vineyardctl is the command-line tool for working with the
Vineyard Operator. It supports creating, deleting and checking
status of Vineyard Operator. It also supports managing the
vineyard relevant components such as vineyardd and pluggable
drivers.</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-create"><span class="std std-ref">vineyardctl create</span></a>	 - Create a vineyard jobs on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-csi"><span class="std std-ref">vineyardctl csi</span></a>	 - Start the vineyard csi driver</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-get"><span class="std std-ref">vineyardctl get</span></a>	 - Get vineyard object, metadata, blob or cluster-info</p></li>
<li><p><a class="reference internal" href="#vineyardctl-inject"><span class="std std-ref">vineyardctl inject</span></a>	 - Inject the vineyard sidecar container into a workload</p></li>
<li><p><a class="reference internal" href="#vineyardctl-ls"><span class="std std-ref">vineyardctl ls</span></a>	 - List vineyard objects, metadatas or blobs</p></li>
<li><p><a class="reference internal" href="#vineyardctl-manager"><span class="std std-ref">vineyardctl manager</span></a>	 - Start the manager of vineyard operator</p></li>
<li><p><a class="reference internal" href="#vineyardctl-put"><span class="std std-ref">vineyardctl put</span></a>	 - Put basic data type into vineyard</p></li>
<li><p><a class="reference internal" href="#vineyardctl-schedule"><span class="std std-ref">vineyardctl schedule</span></a>	 - Schedule a workload or a workflow to existing vineyard cluster.</p></li>
</ul>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">namespace</span>    <span class="n">create</span> <span class="n">the</span> <span class="n">namespace</span> <span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">,</span> <span class="n">default</span> <span class="n">false</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="o">--</span><span class="n">dump</span><span class="o">-</span><span class="n">usage</span>          <span class="n">Dump</span> <span class="n">usage</span> <span class="ow">in</span> <span class="n">JSON</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span> <span class="o">--</span><span class="n">gen</span><span class="o">-</span><span class="n">doc</span>             <span class="n">Generate</span> <span class="n">reference</span> <span class="n">docs</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="s2">&quot;./cmd/README.md&quot;</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                <span class="n">help</span> <span class="k">for</span> <span class="n">vineyardctl</span>
      <span class="o">--</span><span class="n">kubeconfig</span> <span class="n">string</span>   <span class="n">kubeconfig</span> <span class="n">path</span> <span class="k">for</span> <span class="n">the</span> <span class="n">kubernetes</span> <span class="n">cluster</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;$HOME/.kube/config&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">--</span><span class="n">namespace</span> <span class="n">string</span>    <span class="n">the</span> <span class="n">namespace</span> <span class="k">for</span> <span class="n">operation</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-system&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">verbose</span>             <span class="nb">print</span> <span class="n">verbose</span> <span class="n">log</span><span class="p">,</span> <span class="n">default</span> <span class="n">false</span>
  <span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>             <span class="n">version</span> <span class="k">for</span> <span class="n">vineyardctl</span>
      <span class="o">--</span><span class="n">wait</span>                <span class="n">wait</span> <span class="k">for</span> <span class="n">the</span> <span class="n">kubernetes</span> <span class="n">resource</span> <span class="n">to</span> <span class="n">be</span> <span class="n">ready</span><span class="p">,</span> <span class="n">default</span> <span class="n">true</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="vineyardctl-create">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span></code><a class="headerlink" href="#vineyardctl-create" title="Link to this heading">¶</a></h2>
<p>Create a vineyard jobs on kubernetes</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-create-backup"><span class="std std-ref">vineyardctl create backup</span></a>	 - Create a backup cr to backup the current vineyard cluster on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-create-operation"><span class="std std-ref">vineyardctl create operation</span></a>	 - Insert an operation in a workflow based on vineyard cluster</p></li>
<li><p><a class="reference internal" href="#vineyardctl-create-recover"><span class="std std-ref">vineyardctl create recover</span></a>	 - Create a recover cr to recover the current vineyard cluster on kubernetes</p></li>
</ul>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># create the backup job on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>backup<span class="w"> </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>--vineyardd-namespace<span class="w"> </span>vineyard-system

<span class="w">  </span><span class="c1"># create the recover job on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>recover<span class="w"> </span>--backup-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system

<span class="w">  </span><span class="c1"># create the operation job on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>operation<span class="w"> </span>--name<span class="w"> </span>assembly<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--type<span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--require<span class="w"> </span>job1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>job2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timeoutSeconds<span class="w"> </span><span class="m">600</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3>Options<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">create</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-create-backup">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">backup</span></code><a class="headerlink" href="#vineyardctl-create-backup" title="Link to this heading">¶</a></h2>
<p>Create a backup cr to backup the current vineyard cluster on kubernetes</p>
<section id="id2">
<h3>Synopsis<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Backup the current vineyard cluster on kubernetes. You could
backup all objects of the current vineyard cluster quickly.
For persistent storage, you could specify the pv spec and pv
spec.</p>
<p>Notice, the command is used to create a backup cr for the
vineyard operator and you must deploy the vineyard operator
and vineyard cluster before using it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">create</span> <span class="n">backup</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-create"><span class="std std-ref">vineyardctl create</span></a>	 - Create a vineyard jobs on kubernetes</p></li>
</ul>
</section>
<section id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># create a backup cr for the vineyard cluster on kubernetes</span>
<span class="w">  </span><span class="c1"># you could define the pv and pvc spec from json string as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>backup<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pv-pvc-spec<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">      &quot;pv-spec&quot;: {</span>
<span class="s1">        &quot;capacity&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;1Gi&quot;</span>
<span class="s1">        },</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;hostPath&quot;: {</span>
<span class="s1">          &quot;path&quot;: &quot;/var/vineyard/dump&quot;</span>
<span class="s1">        }</span>
<span class="s1">      },</span>
<span class="s1">      &quot;pvc-spec&quot;: {</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;resources&quot;: {</span>
<span class="s1">          &quot;requests&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;1Gi&quot;</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      }</span>
<span class="s1">      }&#39;</span>

<span class="w">  </span><span class="c1"># create a backup cr for the vineyard cluster on kubernetes</span>
<span class="w">  </span><span class="c1"># you could define the pv and pvc spec from yaml string as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>backup<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pv-pvc-spec<span class="w">  </span><span class="se">\</span>
<span class="w">    </span><span class="s1">&#39;</span>
<span class="s1">    pv-spec:</span>
<span class="s1">    capacity:</span>
<span class="s1">    storage: 1Gi</span>
<span class="s1">    accessModes:</span>
<span class="s1">    - ReadWriteOnce</span>
<span class="s1">    storageClassName: manual</span>
<span class="s1">    hostPath:</span>
<span class="s1">    path: &quot;/var/vineyard/dump&quot;</span>
<span class="s1">    pvc-spec:</span>
<span class="s1">    storageClassName: manual</span>
<span class="s1">    accessModes:</span>
<span class="s1">    - ReadWriteOnce</span>
<span class="s1">    resources:</span>
<span class="s1">    requests:</span>
<span class="s1">    storage: 1Gi</span>
<span class="s1">    &#39;</span>

<span class="w">  </span><span class="c1"># create a backup cr for the vineyard cluster on kubernetes</span>
<span class="w">  </span><span class="c1"># you could define the pv and pvc spec from json file as follows</span>
<span class="w">  </span><span class="c1"># also you could use yaml file instead of json file</span>
<span class="w">  </span>cat<span class="w"> </span>pv-pvc.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>backup<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>-
</pre></div>
</div>
</section>
<section id="id4">
<h3>Options<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">backup</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>           <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">backup</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-backup&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                         <span class="n">help</span> <span class="k">for</span> <span class="n">backup</span>
      <span class="o">--</span><span class="n">objectIDs</span> <span class="n">strings</span>            <span class="n">the</span> <span class="n">specific</span> <span class="n">objects</span> <span class="n">to</span> <span class="n">be</span> <span class="n">backed</span> <span class="n">up</span>
      <span class="o">--</span><span class="n">path</span> <span class="n">string</span>                  <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">the</span> <span class="n">backup</span> <span class="n">data</span>
      <span class="o">--</span><span class="n">pv</span><span class="o">-</span><span class="n">pvc</span><span class="o">-</span><span class="n">spec</span> <span class="n">string</span>           <span class="n">the</span> <span class="n">PersistentVolume</span> <span class="ow">and</span> <span class="n">PersistentVolumeClaim</span> <span class="n">of</span> <span class="n">the</span> <span class="n">backup</span> <span class="n">data</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">-</span><span class="n">namespace</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">vineyardd</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-create-operation">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">operation</span></code><a class="headerlink" href="#vineyardctl-create-operation" title="Link to this heading">¶</a></h2>
<p>Insert an operation in a workflow based on vineyard cluster</p>
<section id="id5">
<h3>Synopsis<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p>Insert an operation in a workflow based on vineyard cluster.
You could create a assembly or repartition operation in a
workflow. Usually, the operation should be created between
the workloads: job1 -&gt; operation -&gt; job2.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">create</span> <span class="n">operation</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-create"><span class="std std-ref">vineyardctl create</span></a>	 - Create a vineyard jobs on kubernetes</p></li>
</ul>
</section>
<section id="id6">
<h3>Examples<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># create a local assembly operation between job1 and job2</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>operation<span class="w"> </span>--name<span class="w"> </span>assembly<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--type<span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--require<span class="w"> </span>job1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>job2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timeoutSeconds<span class="w"> </span><span class="m">600</span>

<span class="w">  </span><span class="c1"># create a distributed assembly operation between job1 and job2</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>operation<span class="w"> </span>--name<span class="w"> </span>assembly<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--type<span class="w"> </span>distributed<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--require<span class="w"> </span>job1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>job2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timeoutSeconds<span class="w"> </span><span class="m">600</span>

<span class="w">  </span><span class="c1"># create a dask repartition operation between job1 and job2</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>operation<span class="w"> </span>--name<span class="w"> </span>repartition<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--type<span class="w"> </span>dask<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--require<span class="w"> </span>job1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>job2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timeoutSeconds<span class="w"> </span><span class="m">600</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3>Options<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                 <span class="n">help</span> <span class="k">for</span> <span class="n">operation</span>
      <span class="o">--</span><span class="n">kind</span> <span class="n">string</span>          <span class="n">the</span> <span class="n">kind</span> <span class="n">of</span> <span class="n">operation</span><span class="p">,</span> <span class="n">including</span> <span class="s2">&quot;assembly&quot;</span> <span class="ow">and</span> <span class="s2">&quot;repartition&quot;</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>          <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">operation</span>
      <span class="o">--</span><span class="n">require</span> <span class="n">string</span>       <span class="n">the</span> <span class="n">job</span> <span class="n">that</span> <span class="n">need</span> <span class="n">an</span> <span class="n">operation</span> <span class="n">to</span> <span class="n">be</span> <span class="n">executed</span>
      <span class="o">--</span><span class="n">target</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">job</span> <span class="n">that</span> <span class="n">need</span> <span class="n">to</span> <span class="n">be</span> <span class="n">executed</span> <span class="n">before</span> <span class="n">this</span> <span class="n">operation</span>
      <span class="o">--</span><span class="n">timeoutSeconds</span> <span class="nb">int</span>   <span class="n">the</span> <span class="n">timeout</span> <span class="n">seconds</span> <span class="n">of</span> <span class="n">operation</span> <span class="p">(</span><span class="n">default</span> <span class="mi">600</span><span class="p">)</span>
      <span class="o">--</span><span class="nb">type</span> <span class="n">string</span>          <span class="n">the</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">operation</span><span class="p">:</span> <span class="k">for</span> <span class="n">assembly</span><span class="p">,</span> <span class="n">it</span> <span class="n">can</span> <span class="n">be</span> <span class="s2">&quot;local&quot;</span> <span class="ow">or</span> <span class="s2">&quot;distributed&quot;</span><span class="p">;</span> <span class="k">for</span> <span class="n">repartition</span><span class="p">,</span> <span class="n">it</span> <span class="n">can</span> <span class="n">be</span> <span class="s2">&quot;dask&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-create-recover">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">recover</span></code><a class="headerlink" href="#vineyardctl-create-recover" title="Link to this heading">¶</a></h2>
<p>Create a recover cr to recover the current vineyard cluster on kubernetes</p>
<section id="id8">
<h3>Synopsis<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<p>Recover the current vineyard cluster on kubernetes. You could
recover all objects from a backup of vineyard cluster. Usually,
the recover crd should be created in the same namespace of
the backup job.</p>
<p>Notice, the command is used to create a recover cr for the
vineyard operator and you must deploy the vineyard operator
and vineyard cluster before using it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">create</span> <span class="n">recover</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-create"><span class="std std-ref">vineyardctl create</span></a>	 - Create a vineyard jobs on kubernetes</p></li>
</ul>
</section>
<section id="id9">
<h3>Examples<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># create a recover cr for a backup job in the same namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>create<span class="w"> </span>recover<span class="w"> </span>--backup-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system
</pre></div>
</div>
</section>
<section id="id10">
<h3>Options<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">backup</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>    <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">backup</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-backup&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                  <span class="n">help</span> <span class="k">for</span> <span class="n">recover</span>
      <span class="o">--</span><span class="n">recover</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">recover</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-recover&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-csi">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">csi</span></code><a class="headerlink" href="#vineyardctl-csi" title="Link to this heading">¶</a></h2>
<p>Start the vineyard csi driver</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">csi</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
</ul>
<section id="id11">
<h3>Examples<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># start the csi with the specific endpoint and node id</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>csi<span class="w"> </span>--endpoint<span class="o">=</span>unix:///csi/csi.sock<span class="w"> </span>--nodeid<span class="o">=</span>csinode1
</pre></div>
</div>
</section>
<section id="id12">
<h3>Options<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">endpoint</span> <span class="n">string</span>          <span class="n">the</span> <span class="n">endpoint</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">csi</span> <span class="n">driver</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">csi</span>
      <span class="o">--</span><span class="n">nodeid</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">node</span> <span class="nb">id</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">csi</span> <span class="n">driver</span>
      <span class="o">--</span><span class="n">state</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">path</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">state</span> <span class="n">file</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;/csi/state&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span></code><a class="headerlink" href="#vineyardctl-delete" title="Link to this heading">¶</a></h2>
<p>Delete the vineyard components from kubernetes</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-backup"><span class="std std-ref">vineyardctl delete backup</span></a>	 - Delete the backup job on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-csidriver"><span class="std std-ref">vineyardctl delete csidriver</span></a>	 - Delete the vineyard csi driver on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-operation"><span class="std std-ref">vineyardctl delete operation</span></a>	 - Delete the operation from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-operator"><span class="std std-ref">vineyardctl delete operator</span></a>	 - Delete the vineyard operator from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-recover"><span class="std std-ref">vineyardctl delete recover</span></a>	 - Delete the recover job from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-vineyard-cluster"><span class="std std-ref">vineyardctl delete vineyard-cluster</span></a>	 - Delete the vineyard cluster from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-vineyard-deployment"><span class="std std-ref">vineyardctl delete vineyard-deployment</span></a>	 - delete vineyard-deployment will delete the vineyard deployment without vineyard operator</p></li>
<li><p><a class="reference internal" href="#vineyardctl-delete-vineyardd"><span class="std std-ref">vineyardctl delete vineyardd</span></a>	 - Delete the vineyardd cluster from kubernetes</p></li>
</ul>
<section id="id13">
<h3>Examples<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default vineyard cluster on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>delete

<span class="w">  </span><span class="c1"># delete the default vineyard operator on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>delete<span class="w"> </span>operator

<span class="w">  </span><span class="c1"># delete the default vineyardd on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>delete<span class="w"> </span>vineyardd
</pre></div>
</div>
</section>
<section id="id14">
<h3>Options<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-backup">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">backup</span></code><a class="headerlink" href="#vineyardctl-delete-backup" title="Link to this heading">¶</a></h2>
<p>Delete the backup job on kubernetes</p>
<section id="id15">
<h3>Synopsis<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<p>Delete the backup job on kubernetes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">backup</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
</section>
<section id="id16">
<h3>Examples<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default backup job</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>backup
</pre></div>
</div>
</section>
<section id="id17">
<h3>Options<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">backup</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">backup</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-backup&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                 <span class="n">help</span> <span class="k">for</span> <span class="n">backup</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-csidriver">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">csidriver</span></code><a class="headerlink" href="#vineyardctl-delete-csidriver" title="Link to this heading">¶</a></h2>
<p>Delete the vineyard csi driver on kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">csidriver</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id18">
<h3>Examples<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the csi driver named &quot;csidriver-test&quot;</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>csidriver<span class="w"> </span>--name<span class="w"> </span>csidriver-test
</pre></div>
</div>
</section>
<section id="id19">
<h3>Options<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>          <span class="n">help</span> <span class="k">for</span> <span class="n">csidriver</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>   <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">csi</span> <span class="n">driver</span> <span class="n">cr</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;csidriver-sample&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-operation">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">operation</span></code><a class="headerlink" href="#vineyardctl-delete-operation" title="Link to this heading">¶</a></h2>
<p>Delete the operation from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">operation</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id20">
<h3>Examples<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the operation named &quot;assembly-test&quot; in the &quot;vineyard-system&quot; namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>operation<span class="w"> </span>--name<span class="w"> </span>assembly-test
</pre></div>
</div>
</section>
<section id="id21">
<h3>Options<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>          <span class="n">help</span> <span class="k">for</span> <span class="n">operation</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">operation</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-operator">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">operator</span></code><a class="headerlink" href="#vineyardctl-delete-operator" title="Link to this heading">¶</a></h2>
<p>Delete the vineyard operator from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">operator</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id22">
<h3>Examples<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default vineyard operator in the vineyard-system namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>operator
<span class="w">  </span>
<span class="w">  </span><span class="c1"># delete the vineyard operator in a specific namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>operator<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
</pre></div>
</div>
</section>
<section id="id23">
<h3>Options<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">operator</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-recover">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">recover</span></code><a class="headerlink" href="#vineyardctl-delete-recover" title="Link to this heading">¶</a></h2>
<p>Delete the recover job from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">recover</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id24">
<h3>Examples<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default recover job on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>recover
</pre></div>
</div>
</section>
<section id="id25">
<h3>Options<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                  <span class="n">help</span> <span class="k">for</span> <span class="n">recover</span>
      <span class="o">--</span><span class="n">recover</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">recover</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-recover&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-vineyard-cluster">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyard-cluster</span></code><a class="headerlink" href="#vineyardctl-delete-vineyard-cluster" title="Link to this heading">¶</a></h2>
<p>Delete the vineyard cluster from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">cluster</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id26">
<h3>Examples<a class="headerlink" href="#id26" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default vineyard cluster on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>vineyard-cluster
</pre></div>
</div>
</section>
<section id="id27">
<h3>Options<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">cluster</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-vineyard-deployment">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyard-deployment</span></code><a class="headerlink" href="#vineyardctl-delete-vineyard-deployment" title="Link to this heading">¶</a></h2>
<p>delete vineyard-deployment will delete the vineyard deployment without vineyard operator</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id28">
<h3>Examples<a class="headerlink" href="#id28" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default vineyard deployment in the vineyard-system namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>delete<span class="w"> </span>vineyard-deployment

<span class="w">  </span><span class="c1"># delete the vineyard deployment with specific name in the vineyard-system namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>delete<span class="w"> </span>vineyard-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--name<span class="w"> </span>vineyardd-0
</pre></div>
</div>
</section>
<section id="id29">
<h3>Options<a class="headerlink" href="#id29" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>          <span class="n">help</span> <span class="k">for</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardd-sample&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-delete-vineyardd">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyardd</span></code><a class="headerlink" href="#vineyardctl-delete-vineyardd" title="Link to this heading">¶</a></h2>
<p>Delete the vineyardd cluster from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">delete</span> <span class="n">vineyardd</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-delete"><span class="std std-ref">vineyardctl delete</span></a>	 - Delete the vineyard components from kubernetes</p></li>
</ul>
<section id="id30">
<h3>Examples<a class="headerlink" href="#id30" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># delete the default vineyardd cluster(vineyardd-sample) in the default namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>delete<span class="w"> </span>vineyardd

<span class="w">  </span><span class="c1"># delete the specific vineyardd cluster in the vineyard-system namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>delete<span class="w"> </span>vineyardd<span class="w"> </span>--name<span class="w"> </span>vineyardd-test
</pre></div>
</div>
</section>
<section id="id31">
<h3>Options<a class="headerlink" href="#id31" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>          <span class="n">help</span> <span class="k">for</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardd-sample&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span></code><a class="headerlink" href="#vineyardctl-deploy" title="Link to this heading">¶</a></h2>
<p>Deploy the vineyard components on kubernetes</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-backup-job"><span class="std std-ref">vineyardctl deploy backup-job</span></a>	 - Deploy a backup job of vineyard cluster on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-csidriver"><span class="std std-ref">vineyardctl deploy csidriver</span></a>	 - Deploy the vineyard csi driver on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-operator"><span class="std std-ref">vineyardctl deploy operator</span></a>	 - Deploy the vineyard operator on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-recover-job"><span class="std std-ref">vineyardctl deploy recover-job</span></a>	 - Deploy a recover job to recover a backup of current vineyard cluster on kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-vineyard-cluster"><span class="std std-ref">vineyardctl deploy vineyard-cluster</span></a>	 - Deploy the vineyard cluster from kubernetes</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-vineyard-deployment"><span class="std std-ref">vineyardctl deploy vineyard-deployment</span></a>	 - DeployVineyardDeployment builds and deploy the yaml file of vineyardd without vineyard operator</p></li>
<li><p><a class="reference internal" href="#vineyardctl-deploy-vineyardd"><span class="std std-ref">vineyardctl deploy vineyardd</span></a>	 - Deploy the vineyardd on kubernetes</p></li>
</ul>
<section id="id32">
<h3>Examples<a class="headerlink" href="#id32" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the default vineyard cluster on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyard-cluster

<span class="w">  </span><span class="c1"># deploy the vineyard operator on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>operator

<span class="w">  </span><span class="c1"># deploy the vineyardd on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd
<span class="w">  </span>
<span class="w">  </span><span class="c1"># deploy the vineyard csi driver on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>csidriver<span class="w"> </span>--name<span class="w"> </span>vineyard-csi-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--clusters<span class="w"> </span>vineyard-system/vineyardd-sample,default/vineyardd-sample
</pre></div>
</div>
</section>
<section id="id33">
<h3>Options<a class="headerlink" href="#id33" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">deploy</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-backup-job">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">backup-job</span></code><a class="headerlink" href="#vineyardctl-deploy-backup-job" title="Link to this heading">¶</a></h2>
<p>Deploy a backup job of vineyard cluster on kubernetes</p>
<section id="id34">
<h3>Synopsis<a class="headerlink" href="#id34" title="Link to this heading">¶</a></h3>
<p>Deploy the backup job for the vineyard cluster on kubernetes,
which will backup all objects of the current vineyard cluster
quickly. For persistent storage, you could specify the pv spec
and pv spec and the related pv and pvc will be created automatically.
Also, you could also specify the existing pv and pvc name to use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">backup</span><span class="o">-</span><span class="n">job</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id35">
<h3>Examples<a class="headerlink" href="#id35" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy a backup job for all vineyard objects of the vineyard</span>
<span class="w">  </span><span class="c1"># cluster on kubernetes and you could define the pv and pvc</span>
<span class="w">  </span><span class="c1"># spec from json string as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>backup-job<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pv-pvc-spec<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">      &quot;pv-spec&quot;: {</span>
<span class="s1">        &quot;capacity&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;1Gi&quot;</span>
<span class="s1">        },</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;hostPath&quot;: {</span>
<span class="s1">          &quot;path&quot;: &quot;/var/vineyard/dump&quot;</span>
<span class="s1">        }</span>
<span class="s1">      },</span>
<span class="s1">      &quot;pvc-spec&quot;: {</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;resources&quot;: {</span>
<span class="s1">          &quot;requests&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;1Gi&quot;</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      }</span>
<span class="s1">      }&#39;</span>

<span class="w">  </span><span class="c1"># deploy a backup job for the vineyard cluster on kubernetes</span>
<span class="w">  </span><span class="c1"># you could define the pv and pvc spec from yaml string as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>backup-job<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pv-pvc-spec<span class="w">  </span><span class="se">\</span>
<span class="w">    </span><span class="s1">&#39;</span>
<span class="s1">    pv-spec:</span>
<span class="s1">    capacity:</span>
<span class="s1">      storage: 1Gi</span>
<span class="s1">    accessModes:</span>
<span class="s1">    - ReadWriteOnce</span>
<span class="s1">    storageClassName: manual</span>
<span class="s1">    hostPath:</span>
<span class="s1">      path: &quot;/var/vineyard/dump&quot;</span>
<span class="s1">    pvc-spec:</span>
<span class="s1">    storageClassName: manual</span>
<span class="s1">    accessModes:</span>
<span class="s1">    - ReadWriteOnce</span>
<span class="s1">    resources:</span>
<span class="s1">      requests:</span>
<span class="s1">      storage: 1Gi</span>
<span class="s1">    &#39;</span>

<span class="w">  </span><span class="c1"># deploy a backup job for specific vineyard objects of the vineyard</span>
<span class="w">  </span><span class="c1"># cluster on kubernetes.</span>
<span class="w">  </span>cat<span class="w"> </span>pv-pvc.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>backup-job<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--objectIDs<span class="w"> </span><span class="s2">&quot;o000018d29207fd01,o000018d80d264010&quot;</span><span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump
<span class="w">    </span>
<span class="w">  </span><span class="c1"># Assume you have already deployed a pvc named &quot;pvc-sample&quot;, you</span>
<span class="w">  </span><span class="c1"># could use them as the backend storage for the backup job as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>backup-job<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pvc-name<span class="w"> </span>pvc-sample
<span class="w">  </span>
<span class="w">  </span><span class="c1"># The namespace to deploy the backup and recover job must be the same</span>
<span class="w">  </span><span class="c1"># as the vineyard cluster namespace.</span>
<span class="w">  </span><span class="c1"># Assume the vineyard cluster is deployed in the namespace &quot;test&quot;, you</span>
<span class="w">  </span><span class="c1"># could deploy the backup job as follows</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>backup-job<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-deployment-namespace<span class="w"> </span><span class="nb">test</span><span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--namespace<span class="w"> </span><span class="nb">test</span><span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--path<span class="w"> </span>/var/vineyard/dump<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--pvc-name<span class="w"> </span>pvc-sample
</pre></div>
</div>
</section>
<section id="id36">
<h3>Options<a class="headerlink" href="#id36" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">backup</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>                     <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">backup</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-backup&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                                   <span class="n">help</span> <span class="k">for</span> <span class="n">backup</span><span class="o">-</span><span class="n">job</span>
      <span class="o">--</span><span class="n">objectIDs</span> <span class="n">strings</span>                      <span class="n">the</span> <span class="n">specific</span> <span class="n">objects</span> <span class="n">to</span> <span class="n">be</span> <span class="n">backed</span> <span class="n">up</span>
      <span class="o">--</span><span class="n">path</span> <span class="n">string</span>                            <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">the</span> <span class="n">backup</span> <span class="n">data</span>
      <span class="o">--</span><span class="n">pv</span><span class="o">-</span><span class="n">pvc</span><span class="o">-</span><span class="n">spec</span> <span class="n">string</span>                     <span class="n">the</span> <span class="n">PersistentVolume</span> <span class="ow">and</span> <span class="n">PersistentVolumeClaim</span> <span class="n">of</span> <span class="n">the</span> <span class="n">backup</span> <span class="n">data</span>
      <span class="o">--</span><span class="n">pvc</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">PersistentVolumeClaim</span>
      <span class="o">--</span><span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
      <span class="o">--</span><span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">namespace</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-csidriver">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">csidriver</span></code><a class="headerlink" href="#vineyardctl-deploy-csidriver" title="Link to this heading">¶</a></h2>
<p>Deploy the vineyard csi driver on kubernetes</p>
<section id="id37">
<h3>Synopsis<a class="headerlink" href="#id37" title="Link to this heading">¶</a></h3>
<p>Deploy the Vineyard CSI Driver on kubernetes.
The CR is a cluster-scoped resource, and can only be created once.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">csidriver</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id38">
<h3>Examples<a class="headerlink" href="#id38" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the Vineyard CSI Driver named vineyard-csi-sample on kubernetes</span>
<span class="w">  </span><span class="c1"># Notice, the clusters are built as {vineyard-deployment-namespace}/{vineyard-deployment-name}</span>
<span class="w">  </span><span class="c1"># and sperated by comma, e.g. vineyard-system/vineyardd-sample, default/vineyardd-sample</span>
<span class="w">  </span><span class="c1"># They must be created before deploying the Vineyard CSI Driver.</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>csidriver<span class="w"> </span>--name<span class="w"> </span>vineyard-csi-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--clusters<span class="w"> </span>vineyard-system/vineyardd-sample,default/vineyardd-sample
</pre></div>
</div>
</section>
<section id="id39">
<h3>Options<a class="headerlink" href="#id39" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">attacherImage</span> <span class="n">string</span>             <span class="n">The</span> <span class="n">image</span> <span class="n">of</span> <span class="n">csi</span> <span class="n">attacher</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;registry.k8s.io/sig-storage/csi-attacher:v4.0.0&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">clusters</span> <span class="n">strings</span>                 <span class="n">The</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">clusters</span><span class="o">.</span>
      <span class="o">--</span><span class="n">enableToleration</span>                 <span class="n">Enable</span> <span class="n">toleration</span> <span class="k">for</span> <span class="n">vineyard</span> <span class="n">csi</span> <span class="n">driver</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                             <span class="n">help</span> <span class="k">for</span> <span class="n">csidriver</span>
  <span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="o">--</span><span class="n">image</span> <span class="n">string</span>                     <span class="n">The</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">csi</span> <span class="n">driver</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyard-operator&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">imagePullPolicy</span> <span class="n">string</span>           <span class="n">The</span> <span class="n">image</span> <span class="n">pull</span> <span class="n">policy</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">csi</span> <span class="n">driver</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">livenessProbeImage</span> <span class="n">string</span>        <span class="n">The</span> <span class="n">image</span> <span class="n">of</span> <span class="n">livenessProbe</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;registry.k8s.io/sig-storage/livenessprobe:v2.8.0&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>                      <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">csi</span> <span class="n">driver</span> <span class="n">cr</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;csidriver-sample&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">nodeRegistrarImage</span> <span class="n">string</span>        <span class="n">The</span> <span class="n">image</span> <span class="n">of</span> <span class="n">csi</span> <span class="n">nodeRegistrar</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.6.0&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">provisionerImage</span> <span class="n">string</span>          <span class="n">The</span> <span class="n">image</span> <span class="n">of</span> <span class="n">csi</span> <span class="n">provisioner</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;registry.k8s.io/sig-storage/csi-provisioner:v3.3.0&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">enableTopology</span>           <span class="n">Enable</span> <span class="n">topology</span> <span class="k">for</span> <span class="n">the</span> <span class="n">csi</span> <span class="n">driver</span><span class="o">.</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>   <span class="n">The</span> <span class="n">image</span> <span class="n">pull</span> <span class="n">policy</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">sidecar</span> <span class="n">containers</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;Always&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">s</span><span class="p">,</span> <span class="o">--</span><span class="n">storageClassName</span> <span class="n">string</span>          <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">storage</span> <span class="n">class</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-csi&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">m</span><span class="p">,</span> <span class="o">--</span><span class="n">volumeBindingMode</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">volume</span> <span class="n">binding</span> <span class="n">mode</span> <span class="n">of</span> <span class="n">the</span> <span class="n">storage</span> <span class="n">class</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;WaitForFirstConsumer&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-operator">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">operator</span></code><a class="headerlink" href="#vineyardctl-deploy-operator" title="Link to this heading">¶</a></h2>
<p>Deploy the vineyard operator on kubernetes</p>
<section id="id40">
<h3>Synopsis<a class="headerlink" href="#id40" title="Link to this heading">¶</a></h3>
<p>Deploy the vineyard operator on kubernetes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">operator</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id41">
<h3>Examples<a class="headerlink" href="#id41" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the vineyard operator on the &#39;vineyard-system&#39; namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>operator
<span class="w">  </span>
<span class="w">  </span><span class="c1"># deploy the vineyard operator on the existing namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>operator<span class="w"> </span>-n<span class="w"> </span>my-custom-namespace
<span class="w">  </span>
<span class="w">  </span><span class="c1"># deploy the vineyard operator on the new namespace</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>operator<span class="w"> </span>-n<span class="w"> </span>a-new-namespace-name<span class="w"> </span>--create-namespace
</pre></div>
</div>
</section>
<section id="id42">
<h3>Options<a class="headerlink" href="#id42" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">operator</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-recover-job">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">recover-job</span></code><a class="headerlink" href="#vineyardctl-deploy-recover-job" title="Link to this heading">¶</a></h2>
<p>Deploy a recover job to recover a backup of current vineyard cluster on kubernetes</p>
<section id="id43">
<h3>Synopsis<a class="headerlink" href="#id43" title="Link to this heading">¶</a></h3>
<p>Deploy the recover job for vineyard cluster on kubernetes, which
will recover all objects from a backup of vineyard cluster. Usually,
the recover job should be created in the same namespace of
the backup job.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">recover</span><span class="o">-</span><span class="n">job</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id44">
<h3>Examples<a class="headerlink" href="#id44" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Deploy a recover job for the vineyard deployment in the same namespace.</span>
<span class="w">  </span><span class="c1"># After the recover job finished, the command will create a kubernetes</span>
<span class="w">  </span><span class="c1"># configmap named [recover-name]+&quot;-mapping-table&quot; that contains the</span>
<span class="w">  </span><span class="c1"># mapping table from the old vineyard objects to the new ones.</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="c1"># If you create the recover job as follows, you can get the mapping table via</span>
<span class="w">  </span><span class="c1"># &quot;kubectl get configmap vineyard-recover-mapping-table -n vineyard-system -o yaml&quot;</span>
<span class="w">  </span><span class="c1"># the left column is the old object id, and the right column is the new object id.</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>recover-job<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vineyard-deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vineyard-deployment-namespace<span class="w"> </span>vineyard-system<span class="w">  </span><span class="se">\</span>
<span class="w">  </span>--recover-path<span class="w"> </span>/var/vineyard/dump<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--pvc-name<span class="w"> </span>vineyard-backup
</pre></div>
</div>
</section>
<section id="id45">
<h3>Options<a class="headerlink" href="#id45" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                                   <span class="n">help</span> <span class="k">for</span> <span class="n">recover</span><span class="o">-</span><span class="n">job</span>
      <span class="o">--</span><span class="n">pvc</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">PersistentVolumeClaim</span>
      <span class="o">--</span><span class="n">recover</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>                    <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">recover</span> <span class="n">job</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-recover&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">recover</span><span class="o">-</span><span class="n">path</span> <span class="n">string</span>                    <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">recover</span> <span class="n">job</span>
      <span class="o">--</span><span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
      <span class="o">--</span><span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">namespace</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-vineyard-cluster">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyard-cluster</span></code><a class="headerlink" href="#vineyardctl-deploy-vineyard-cluster" title="Link to this heading">¶</a></h2>
<p>Deploy the vineyard cluster from kubernetes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">cluster</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
<section id="id46">
<h3>Examples<a class="headerlink" href="#id46" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the default vineyard cluster on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>deploy<span class="w"> </span>vineyard-cluster
</pre></div>
</div>
</section>
<section id="id47">
<h3>Options<a class="headerlink" href="#id47" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">cluster</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-vineyard-deployment">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyard-deployment</span></code><a class="headerlink" href="#vineyardctl-deploy-vineyard-deployment" title="Link to this heading">¶</a></h2>
<p>DeployVineyardDeployment builds and deploy the yaml file of vineyardd without vineyard operator</p>
<section id="id48">
<h3>Synopsis<a class="headerlink" href="#id48" title="Link to this heading">¶</a></h3>
<p>Builds and deploy the yaml file of vineyardd the vineyardd
without vineyard operator. You could deploy a customized
vineyardd from stdin or file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id49">
<h3>Examples<a class="headerlink" href="#id49" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the default vineyard deployment on kubernetes</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deploy<span class="w"> </span>vineyard-deployment

<span class="w">  </span><span class="c1"># deploy the vineyard deployment with customized image</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deploy<span class="w"> </span>vineyard-deployment<span class="w"> </span>--image<span class="w"> </span>vineyardcloudnative/vineyardd:v0.12.2
</pre></div>
</div>
</section>
<section id="id50">
<h3>Options<a class="headerlink" href="#id50" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">etcd</span><span class="o">.</span><span class="n">replicas</span> <span class="nb">int</span>                             <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">etcd</span> <span class="n">replicas</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">vineyard</span> <span class="n">cluster</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>                                   <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">vineyardd</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                                          <span class="n">help</span> <span class="k">for</span> <span class="n">vineyard</span><span class="o">-</span><span class="n">deployment</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>                                   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardd-sample&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">owner</span><span class="o">-</span><span class="n">references</span> <span class="n">string</span>                       <span class="n">The</span> <span class="n">owner</span> <span class="n">reference</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="n">resources</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">backupImage</span> <span class="n">string</span>                <span class="n">the</span> <span class="n">backup</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/backup-job&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">daskRepartitionImage</span> <span class="n">string</span>       <span class="n">the</span> <span class="n">dask</span> <span class="n">repartition</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/dask-repartition&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">distributedAssemblyImage</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">distributed</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/distributed-assembly&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">localAssemblyImage</span> <span class="n">string</span>         <span class="n">the</span> <span class="n">local</span> <span class="n">assembly</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/local-assembly&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">recoverImage</span> <span class="n">string</span>               <span class="n">the</span> <span class="n">recover</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/recover-job&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">replicas</span> <span class="nb">int</span>                                  <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">replicas</span> <span class="p">(</span><span class="n">default</span> <span class="mi">3</span><span class="p">)</span>
      <span class="o">--</span><span class="n">securityContext</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">security</span> <span class="n">context</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">cpu</span> <span class="n">string</span>                          <span class="n">the</span> <span class="n">cpu</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">envs</span> <span class="n">strings</span>                        <span class="n">The</span> <span class="n">environment</span> <span class="n">variables</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyardd:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>              <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">memory</span> <span class="n">string</span>                       <span class="n">the</span> <span class="n">memory</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">enable</span>                       <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>                 <span class="n">the</span> <span class="n">metic</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyard-grok-exporter:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>       <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">metric</span> <span class="n">image</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">reserve_memory</span>                      <span class="n">Reserving</span> <span class="n">enough</span> <span class="n">physical</span> <span class="n">memory</span> <span class="n">pages</span> <span class="k">for</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">port</span> <span class="nb">int</span>                    <span class="n">the</span> <span class="n">service</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">type</span> <span class="n">string</span>                 <span class="n">the</span> <span class="n">service</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ClusterIP&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">size</span> <span class="n">string</span>                         <span class="n">The</span> <span class="n">size</span> <span class="n">of</span> <span class="n">vineyardd</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">power</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">two</span> <span class="n">equivalents</span><span class="p">:</span> <span class="n">Ei</span><span class="p">,</span> <span class="n">Pi</span><span class="p">,</span> <span class="n">Ti</span><span class="p">,</span> <span class="n">Gi</span><span class="p">,</span> <span class="n">Mi</span><span class="p">,</span> <span class="n">Ki</span><span class="o">.</span> <span class="n">Defaults</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">means</span> <span class="ow">not</span> <span class="n">limited</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">socket</span> <span class="n">string</span>                       <span class="n">The</span> <span class="n">directory</span> <span class="n">on</span> <span class="n">host</span> <span class="k">for</span> <span class="n">the</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">file</span><span class="o">.</span> <span class="n">The</span> <span class="n">namespace</span> <span class="ow">and</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">your</span> <span class="n">vineyard</span> <span class="n">config</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;/var/run/vineyard-kubernetes/{{.Namespace}}/{{.Name}}&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">config</span> <span class="n">string</span>                 <span class="n">If</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">the</span> <span class="n">spill</span> <span class="n">mechanism</span><span class="p">,</span> <span class="n">please</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">path</span> <span class="n">string</span>                   <span class="n">The</span> <span class="n">path</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">pv</span><span class="o">-</span><span class="n">pvc</span><span class="o">-</span><span class="n">spec</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">the</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="ow">and</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="n">claim</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillLowerRate</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">low</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.3&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillUpperRate</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">high</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.8&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">streamThreshold</span> <span class="nb">int</span>                 <span class="n">memory</span> <span class="n">threshold</span> <span class="n">of</span> <span class="n">streams</span> <span class="p">(</span><span class="n">percentage</span> <span class="n">of</span> <span class="n">total</span> <span class="n">memory</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">80</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">syncCRDs</span>                            <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">mountPath</span> <span class="n">string</span>             <span class="n">Set</span> <span class="n">the</span> <span class="n">mount</span> <span class="n">path</span> <span class="k">for</span> <span class="n">the</span> <span class="n">pvc</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">pvcname</span> <span class="n">string</span>               <span class="n">Set</span> <span class="n">the</span> <span class="n">pvc</span> <span class="n">name</span> <span class="k">for</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">objects</span> <span class="n">persistently</span>
      <span class="o">--</span><span class="n">volume</span> <span class="n">string</span>                                 <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">volume</span>
      <span class="o">--</span><span class="n">volumeMount</span> <span class="n">string</span>                            <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">volume</span> <span class="n">mount</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-deploy-vineyardd">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyardd</span></code><a class="headerlink" href="#vineyardctl-deploy-vineyardd" title="Link to this heading">¶</a></h2>
<p>Deploy the vineyardd on kubernetes</p>
<section id="id51">
<h3>Synopsis<a class="headerlink" href="#id51" title="Link to this heading">¶</a></h3>
<p>Deploy the vineyardd on kubernetes. You could deploy a
customized vineyardd from stdin or file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">deploy</span> <span class="n">vineyardd</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-deploy"><span class="std std-ref">vineyardctl deploy</span></a>	 - Deploy the vineyard components on kubernetes</p></li>
</ul>
</section>
<section id="id52">
<h3>Examples<a class="headerlink" href="#id52" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># deploy the default vineyard on kubernetes</span>
<span class="w">  </span><span class="c1"># wait for the vineyardd to be ready(default option)</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd

<span class="w">  </span><span class="c1"># not to wait for the vineyardd to be ready</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--wait<span class="o">=</span><span class="nb">false</span>

<span class="w">  </span><span class="c1"># deploy the vineyardd from a yaml file</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span>--file<span class="w"> </span>vineyardd.yaml

<span class="w">  </span><span class="c1"># deploy the vineyardd with customized image</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--image<span class="w"> </span>vineyardd:v0.12.2

<span class="w">  </span><span class="c1"># deploy the vineyardd with spill mechanism on persistent storage from json string</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.config<span class="w"> </span>spill-path<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.path<span class="w"> </span>/var/vineyard/spill<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.pv-pvc-spec<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">      &quot;pv-spec&quot;: {</span>
<span class="s1">        &quot;capacity&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;1Gi&quot;</span>
<span class="s1">        },</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;hostPath&quot;: {</span>
<span class="s1">          &quot;path&quot;: &quot;/var/vineyard/spill&quot;</span>
<span class="s1">        }</span>
<span class="s1">      },</span>
<span class="s1">      &quot;pvc-spec&quot;: {</span>
<span class="s1">        &quot;storageClassName&quot;: &quot;manual&quot;,</span>
<span class="s1">        &quot;accessModes&quot;: [</span>
<span class="s1">          &quot;ReadWriteOnce&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;resources&quot;: {</span>
<span class="s1">          &quot;requests&quot;: {</span>
<span class="s1">          &quot;storage&quot;: &quot;512Mi&quot;</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      }</span>
<span class="s1">    }&#39;</span>

<span class="w">  </span><span class="c1"># deploy the vineyardd with spill mechanism on persistent storage from yaml string</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.config<span class="w"> </span>spill-path<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.path<span class="w"> </span>/var/vineyard/spill<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.pv-pvc-spec<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s1">&#39;</span>
<span class="s1">    pv-spec:</span>
<span class="s1">      capacity:</span>
<span class="s1">      storage: 1Gi</span>
<span class="s1">      accessModes:</span>
<span class="s1">      - ReadWriteOnce</span>
<span class="s1">      storageClassName: manual</span>
<span class="s1">      hostPath:</span>
<span class="s1">      path: &quot;/var/vineyard/spill&quot;</span>
<span class="s1">    pvc-spec:</span>
<span class="s1">      storageClassName: manual</span>
<span class="s1">      accessModes:</span>
<span class="s1">      - ReadWriteOnce</span>
<span class="s1">      resources:</span>
<span class="s1">      requests:</span>
<span class="s1">        storage: 512Mi</span>
<span class="s1">    &#39;</span>

<span class="c1"># deploy the vineyardd with spill mechanism on persistent storage from json file</span>
<span class="w">  </span><span class="c1"># also you could use the yaml file</span>
<span class="w">  </span>cat<span class="w"> </span>pv-pvc.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>vineyardctl<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>deploy<span class="w"> </span>vineyardd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.config<span class="w"> </span>spill-path<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd.spill.path<span class="w"> </span>/var/vineyard/spill<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-
</pre></div>
</div>
</section>
<section id="id53">
<h3>Options<a class="headerlink" href="#id53" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">etcd</span><span class="o">.</span><span class="n">replicas</span> <span class="nb">int</span>                             <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">etcd</span> <span class="n">replicas</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">vineyard</span> <span class="n">cluster</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>                                   <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">vineyardd</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                                          <span class="n">help</span> <span class="k">for</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>                                   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardd-sample&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">backupImage</span> <span class="n">string</span>                <span class="n">the</span> <span class="n">backup</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/backup-job&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">daskRepartitionImage</span> <span class="n">string</span>       <span class="n">the</span> <span class="n">dask</span> <span class="n">repartition</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/dask-repartition&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">distributedAssemblyImage</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">distributed</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/distributed-assembly&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">localAssemblyImage</span> <span class="n">string</span>         <span class="n">the</span> <span class="n">local</span> <span class="n">assembly</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">workflow</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/local-assembly&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">pluginImage</span><span class="o">.</span><span class="n">recoverImage</span> <span class="n">string</span>               <span class="n">the</span> <span class="n">recover</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ghcr.io/v6d-io/v6d/recover-job&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">replicas</span> <span class="nb">int</span>                                  <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">replicas</span> <span class="p">(</span><span class="n">default</span> <span class="mi">3</span><span class="p">)</span>
      <span class="o">--</span><span class="n">securityContext</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">security</span> <span class="n">context</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">cpu</span> <span class="n">string</span>                          <span class="n">the</span> <span class="n">cpu</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">envs</span> <span class="n">strings</span>                        <span class="n">The</span> <span class="n">environment</span> <span class="n">variables</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>                        <span class="n">the</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyardd:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>              <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">memory</span> <span class="n">string</span>                       <span class="n">the</span> <span class="n">memory</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">enable</span>                       <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>                 <span class="n">the</span> <span class="n">metic</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyard-grok-exporter:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>       <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">metric</span> <span class="n">image</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">reserve_memory</span>                      <span class="n">Reserving</span> <span class="n">enough</span> <span class="n">physical</span> <span class="n">memory</span> <span class="n">pages</span> <span class="k">for</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">port</span> <span class="nb">int</span>                    <span class="n">the</span> <span class="n">service</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">type</span> <span class="n">string</span>                 <span class="n">the</span> <span class="n">service</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ClusterIP&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">size</span> <span class="n">string</span>                         <span class="n">The</span> <span class="n">size</span> <span class="n">of</span> <span class="n">vineyardd</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">power</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">two</span> <span class="n">equivalents</span><span class="p">:</span> <span class="n">Ei</span><span class="p">,</span> <span class="n">Pi</span><span class="p">,</span> <span class="n">Ti</span><span class="p">,</span> <span class="n">Gi</span><span class="p">,</span> <span class="n">Mi</span><span class="p">,</span> <span class="n">Ki</span><span class="o">.</span> <span class="n">Defaults</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">means</span> <span class="ow">not</span> <span class="n">limited</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">socket</span> <span class="n">string</span>                       <span class="n">The</span> <span class="n">directory</span> <span class="n">on</span> <span class="n">host</span> <span class="k">for</span> <span class="n">the</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">file</span><span class="o">.</span> <span class="n">The</span> <span class="n">namespace</span> <span class="ow">and</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">your</span> <span class="n">vineyard</span> <span class="n">config</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;/var/run/vineyard-kubernetes/{{.Namespace}}/{{.Name}}&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">config</span> <span class="n">string</span>                 <span class="n">If</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">the</span> <span class="n">spill</span> <span class="n">mechanism</span><span class="p">,</span> <span class="n">please</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">path</span> <span class="n">string</span>                   <span class="n">The</span> <span class="n">path</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">pv</span><span class="o">-</span><span class="n">pvc</span><span class="o">-</span><span class="n">spec</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">the</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="ow">and</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="n">claim</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillLowerRate</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">low</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.3&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillUpperRate</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">high</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.8&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">streamThreshold</span> <span class="nb">int</span>                 <span class="n">memory</span> <span class="n">threshold</span> <span class="n">of</span> <span class="n">streams</span> <span class="p">(</span><span class="n">percentage</span> <span class="n">of</span> <span class="n">total</span> <span class="n">memory</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">80</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">syncCRDs</span>                            <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">mountPath</span> <span class="n">string</span>             <span class="n">Set</span> <span class="n">the</span> <span class="n">mount</span> <span class="n">path</span> <span class="k">for</span> <span class="n">the</span> <span class="n">pvc</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">pvcname</span> <span class="n">string</span>               <span class="n">Set</span> <span class="n">the</span> <span class="n">pvc</span> <span class="n">name</span> <span class="k">for</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">objects</span> <span class="n">persistently</span>
      <span class="o">--</span><span class="n">volume</span> <span class="n">string</span>                                 <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">volume</span>
      <span class="o">--</span><span class="n">volumeMount</span> <span class="n">string</span>                            <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="n">volume</span> <span class="n">mount</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-get">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span></code><a class="headerlink" href="#vineyardctl-get" title="Link to this heading">¶</a></h2>
<p>Get vineyard object, metadata, blob or cluster-info</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-get-blob"><span class="std std-ref">vineyardctl get blob</span></a>	 - Get vineyard blob</p></li>
<li><p><a class="reference internal" href="#vineyardctl-get-cluster-info"><span class="std std-ref">vineyardctl get cluster-info</span></a>	 - Get vineyard cluster info</p></li>
<li><p><a class="reference internal" href="#vineyardctl-get-metadata"><span class="std std-ref">vineyardctl get metadata</span></a>	 - Get vineyard metadata</p></li>
<li><p><a class="reference internal" href="#vineyardctl-get-object"><span class="std std-ref">vineyardctl get object</span></a>	 - Get vineyard object</p></li>
</ul>
<section id="id54">
<h3>Examples<a class="headerlink" href="#id54" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Connect the vineyardd deployment with IPC client</span>
<span class="w">  </span><span class="c1"># Get the cluster info and output as table</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>cluster-info<span class="w"> </span>--deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system
</pre></div>
</div>
</section>
<section id="id55">
<h3>Options<a class="headerlink" href="#id55" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">get</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-get-blob">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">blob</span></code><a class="headerlink" href="#vineyardctl-get-blob" title="Link to this heading">¶</a></h2>
<p>Get vineyard blob</p>
<section id="id56">
<h3>Synopsis<a class="headerlink" href="#id56" title="Link to this heading">¶</a></h3>
<p>Get vineyard blob and only support IPC socket.
If you don’t specify the ipc socket every time, you can set it as the
environment variable VINEYARD_IPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">get</span> <span class="n">blob</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-get"><span class="std std-ref">vineyardctl get</span></a>	 - Get vineyard object, metadata, blob or cluster-info</p></li>
</ul>
</section>
<section id="id57">
<h3>Examples<a class="headerlink" href="#id57" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Get vineyard blob with the given vineyard object_id and the ipc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>blob<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># Get vineyard blob with the given vineyard object_id and the ipc socket</span>
<span class="w">  </span><span class="c1"># and set the unsafe to be true</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>blob<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--unsafe<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>
<span class="w">  </span><span class="c1"># If you set the environment variable VINEYARD_IPC_SOCKET</span>
<span class="w">  </span><span class="c1"># you can use the following command to get vineyard blob</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>blob<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx
</pre></div>
</div>
</section>
<section id="id58">
<h3>Options<a class="headerlink" href="#id58" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">blob</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">object_id</span> <span class="n">string</span>         <span class="n">The</span> <span class="nb">object</span> <span class="nb">id</span> <span class="n">to</span> <span class="n">get</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">syncRemote</span>               <span class="n">If</span> <span class="n">the</span> <span class="n">target</span> <span class="nb">object</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">remote</span> <span class="nb">object</span><span class="p">,</span><span class="n">code_remote</span><span class="o">=</span><span class="kc">True</span> <span class="n">will</span> <span class="n">force</span> <span class="n">a</span> <span class="n">meta</span> <span class="n">synchronization</span> <span class="n">on</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">server</span><span class="o">.</span>
      <span class="o">--</span><span class="n">unsafe</span>                   <span class="n">unsafe</span> <span class="n">means</span> <span class="n">getting</span> <span class="n">the</span> <span class="n">blob</span> <span class="n">even</span> <span class="n">the</span> <span class="n">blob</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">sealed</span> <span class="n">yet</span><span class="o">.</span><span class="n">Default</span> <span class="ow">is</span> <span class="kc">False</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-get-cluster-info">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">cluster-info</span></code><a class="headerlink" href="#vineyardctl-get-cluster-info" title="Link to this heading">¶</a></h2>
<p>Get vineyard cluster info</p>
<section id="id59">
<h3>Synopsis<a class="headerlink" href="#id59" title="Link to this heading">¶</a></h3>
<p>Get vineyard cluster info, including
the instanceId, hostName, node name and so on.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">get</span> <span class="n">cluster</span><span class="o">-</span><span class="n">info</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-get"><span class="std std-ref">vineyardctl get</span></a>	 - Get vineyard object, metadata, blob or cluster-info</p></li>
</ul>
</section>
<section id="id60">
<h3>Examples<a class="headerlink" href="#id60" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Get the cluster info of vineyard deployment and output as table</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>cluster-info<span class="w"> </span>--deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system

<span class="w">  </span><span class="c1"># Get the cluster info of vineyard deployment and output as json</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>cluster-info<span class="w"> </span>--deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>-o<span class="w"> </span>json
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Get the cluster info via IPC socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>cluster-info<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
</pre></div>
</div>
</section>
<section id="id61">
<h3>Options<a class="headerlink" href="#id61" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">cluster</span><span class="o">-</span><span class="n">info</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-get-metadata">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">metadata</span></code><a class="headerlink" href="#vineyardctl-get-metadata" title="Link to this heading">¶</a></h2>
<p>Get vineyard metadata</p>
<section id="id62">
<h3>Synopsis<a class="headerlink" href="#id62" title="Link to this heading">¶</a></h3>
<p>Get vineyard metadata and support IPC socket,
RPC socket and vineyard deployment. If you don’t specify the ipc socket or rpc socket
every time, you can set it as the environment variable VINEYARD_IPC_SOCKET or
VINEYARD_RPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">get</span> <span class="n">metadata</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-get"><span class="std std-ref">vineyardctl get</span></a>	 - Get vineyard object, metadata, blob or cluster-info</p></li>
</ul>
</section>
<section id="id63">
<h3>Examples<a class="headerlink" href="#id63" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Get vineyard metadata with the given vineyard object_id and the ipc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>metadata<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># Get vineyard metadata with the given vineyard object_id and the ipc socket</span>
<span class="w">  </span><span class="c1"># and set the syncRemote to be true</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>metadata<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--syncRemote<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># Get vineyard metadata with the given vineyard object_id and the rpc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>metadata<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--rpc-socket<span class="w"> </span><span class="m">127</span>.0.0.1:9600
</pre></div>
</div>
</section>
<section id="id64">
<h3>Options<a class="headerlink" href="#id64" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">metadata</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">object_id</span> <span class="n">string</span>         <span class="n">The</span> <span class="nb">object</span> <span class="nb">id</span> <span class="n">to</span> <span class="n">get</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">syncRemote</span>               <span class="n">If</span> <span class="n">the</span> <span class="n">target</span> <span class="nb">object</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">remote</span> <span class="nb">object</span><span class="p">,</span><span class="n">code_remote</span><span class="o">=</span><span class="kc">True</span> <span class="n">will</span> <span class="n">force</span> <span class="n">a</span> <span class="n">meta</span> <span class="n">synchronization</span> <span class="n">on</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">server</span><span class="o">.</span>
      <span class="o">--</span><span class="n">unsafe</span>                   <span class="n">unsafe</span> <span class="n">means</span> <span class="n">getting</span> <span class="n">the</span> <span class="n">blob</span> <span class="n">even</span> <span class="n">the</span> <span class="n">blob</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">sealed</span> <span class="n">yet</span><span class="o">.</span><span class="n">Default</span> <span class="ow">is</span> <span class="kc">False</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-get-object">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">object</span></code><a class="headerlink" href="#vineyardctl-get-object" title="Link to this heading">¶</a></h2>
<p>Get vineyard object</p>
<section id="id65">
<h3>Synopsis<a class="headerlink" href="#id65" title="Link to this heading">¶</a></h3>
<p>Get vineyard object and support IPC socket,
RPC socket and vineyard deployment. If you don’t specify the ipc socket or rpc socket
every time, you can set it as the environment variable VINEYARD_IPC_SOCKET or
VINEYARD_RPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">get</span> <span class="nb">object</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-get"><span class="std std-ref">vineyardctl get</span></a>	 - Get vineyard object, metadata, blob or cluster-info</p></li>
</ul>
</section>
<section id="id66">
<h3>Examples<a class="headerlink" href="#id66" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Get vineyard object with the given vineyard object_id and the ipc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>object<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># Get vineyard object with the given vineyard object_id and the rpc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>get<span class="w"> </span>object<span class="w"> </span>--object_id<span class="w"> </span>xxxxxxxx<span class="w"> </span>--rpc-socket<span class="w"> </span><span class="m">127</span>.0.0.1:9600
</pre></div>
</div>
</section>
<section id="id67">
<h3>Options<a class="headerlink" href="#id67" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="nb">object</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">object_id</span> <span class="n">string</span>         <span class="n">The</span> <span class="nb">object</span> <span class="nb">id</span> <span class="n">to</span> <span class="n">get</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">syncRemote</span>               <span class="n">If</span> <span class="n">the</span> <span class="n">target</span> <span class="nb">object</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">remote</span> <span class="nb">object</span><span class="p">,</span><span class="n">code_remote</span><span class="o">=</span><span class="kc">True</span> <span class="n">will</span> <span class="n">force</span> <span class="n">a</span> <span class="n">meta</span> <span class="n">synchronization</span> <span class="n">on</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">server</span><span class="o">.</span>
      <span class="o">--</span><span class="n">unsafe</span>                   <span class="n">unsafe</span> <span class="n">means</span> <span class="n">getting</span> <span class="n">the</span> <span class="n">blob</span> <span class="n">even</span> <span class="n">the</span> <span class="n">blob</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">sealed</span> <span class="n">yet</span><span class="o">.</span><span class="n">Default</span> <span class="ow">is</span> <span class="kc">False</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-inject">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">inject</span></code><a class="headerlink" href="#vineyardctl-inject" title="Link to this heading">¶</a></h2>
<p>Inject the vineyard sidecar container into a workload</p>
<section id="id68">
<h3>Synopsis<a class="headerlink" href="#id68" title="Link to this heading">¶</a></h3>
<p>Inject the vineyard sidecar container into a workload. You can
input a workload yaml or a workload json and then get the injected
workload and some etcd manifests from the output. The workload can
be a pod or a deployment or a statefulset, etc.</p>
<p>The output is a set of manifests that includes the injected workload,
the rpc service, the etcd service and the etcd cluster(e.g. several
pods and services).</p>
<p>If you have a pod yaml:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.10</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;import</span><span class="nv"> </span><span class="s">time;</span><span class="nv"> </span><span class="s">time.sleep(100000)&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Then, you can use the following command to inject the vineyard sidecar</p>
<p>$ vineyardctl inject -f pod.yaml</p>
<p>After running the command, the output is as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="nt">app.vineyard.io/role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">    </span><span class="nt">etcd_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--name</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--initial-advertise-peer-urls</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://vineyard-sidecar-etcd-0:2380</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--advertise-client-urls</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://vineyard-sidecar-etcd-0:2379</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--listen-peer-urls</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://0.0.0.0:2380</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--listen-client-urls</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://0.0.0.0:2379</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--initial-cluster</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0=http://vineyard-sidecar-etcd-0:2380</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--initial-cluster-state</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">new</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyardcloudnative/vineyardd:latest</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2379</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2380</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">  </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">etcd_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2379</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2379</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2380</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2380</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">    </span><span class="nt">etcd_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-0</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-etcd-service</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd-for-vineyard-port</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2379</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2379</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="nt">app.vineyard.io/role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar-rpc</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-rpc</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9600</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="nt">app.vineyard.io/role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyardd</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="nt">app.vineyard.io/role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyardd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">while [ ! -e /var/run/vineyard.sock ]; do sleep 1; done;import time; time.sleep(100000)</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARD_IPC_SOCKET</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/vineyard.sock</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.10</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">    </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">/usr/local/bin/vineyardd --sync_crds true --socket /var/run/vineyard.sock --size \</span>
<span class="w">      </span><span class="no">--stream_threshold 80 --etcd_cmd etcd --etcd_prefix /vineyard --etcd_endpoint http://vineyard-sidecar-etcd-service:2379</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_UID</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_NAME</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_NAMESPACE</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyardcloudnative/vineyardd:latest</span>
<span class="w">    </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9600</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-rpc</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">      </span><span class="nt">limits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">requests</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">securityContext</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</pre></div>
</div>
<p>Next, we will introduce a simple example to show the injection with
the apply-resources flag.</p>
<p>Assume you have the following workload yaml:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-deployment</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain"># Notice, you must set the namespace here</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-job</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:1.14.2</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</pre></div>
</div>
<p>Then, you can use the following command to inject the vineyard sidecar
which means that all resources will be created during the injection except
the workload itself. The workload should be created by users.</p>
<p>$ vineyardctl inject -f workload.yaml –apply-resources</p>
<p>After running the command, the main output(removed some unnecessary fields)
is as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-deployment</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-job</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nt">template</span><span class="p">:</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">    </span><span class="c1"># the default sidecar name is vineyard-sidecar</span>
<span class="w">    </span><span class="nt">app.vineyard.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">  </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:1.14.2</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">/usr/local/bin/vineyardd --sync_crds true --socket /var/run/vineyard.sock \</span>
<span class="w">        </span><span class="no">--stream_threshold 80 --etcd_cmd etcd --etcd_prefix /vineyard \</span>
<span class="w">        </span><span class="no">--etcd_endpoint http://vineyard-sidecar-etcd-service:2379</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_UID</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_NAME</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARDD_NAMESPACE</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-job</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyardcloudnative/vineyardd:latest</span>
<span class="w">      </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-sidecar</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9600</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-rpc</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
</pre></div>
</div>
<p>The sidecar template can be accessed from the following link:
<a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/k8s/pkg/templates/sidecar/injection-template.yaml">https://github.com/v6d-io/v6d/blob/main/k8s/pkg/templates/sidecar/injection-template.yaml</a>
also you can get some inspiration from the doc link:
<a class="reference external" href="https://v6d.io/notes/cloud-native/vineyard-operator.html#installing-vineyard-as-sidecar">https://v6d.io/notes/cloud-native/vineyard-operator.html#installing-vineyard-as-sidecar</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">inject</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-inject-argo-workflow"><span class="std std-ref">vineyardctl inject argo-workflow</span></a>	 - Inject the vineyard volumes into the argo workflow</p></li>
</ul>
</section>
<section id="id69">
<h3>Examples<a class="headerlink" href="#id69" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># use json format to output the injected workload</span>
<span class="w">  </span><span class="c1"># notice that the output is a json string of all manifests</span>
<span class="w">  </span><span class="c1"># it looks like:</span>
<span class="w">  </span><span class="c1"># {</span>
<span class="w">  </span><span class="c1">#   &quot;workload&quot;: &quot;workload json string&quot;,</span>
<span class="w">  </span><span class="c1">#   &quot;rpc_service&quot;: &quot;rpc service json string&quot;,</span>
<span class="w">  </span><span class="c1">#   &quot;etcd_service&quot;: &quot;etcd service json string&quot;,</span>
<span class="w">  </span><span class="c1">#   &quot;etcd_internal_service&quot;: [</span>
<span class="w">  </span><span class="c1">#     &quot;etcd internal service json string 1&quot;,</span>
<span class="w">  </span><span class="c1">#     &quot;etcd internal service json string 2&quot;,</span>
<span class="w">  </span><span class="c1">#     &quot;etcd internal service json string 3&quot;</span>
<span class="w">  </span><span class="c1">#   ],</span>
<span class="w">  </span><span class="c1">#   &quot;etcd_pod&quot;: [</span>
<span class="w">  </span><span class="c1">#     &quot;etcd pod json string 1&quot;,</span>
<span class="w">  </span><span class="c1">#     &quot;etcd pod json string 2&quot;,</span>
<span class="w">  </span><span class="c1">#     &quot;etcd pod json string 3&quot;</span>
<span class="w">  </span><span class="c1">#   ]</span>
<span class="w">  </span><span class="c1"># }</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>inject<span class="w"> </span>-f<span class="w"> </span>workload.yaml<span class="w"> </span>-o<span class="w"> </span>json

<span class="w">  </span><span class="c1"># inject the default vineyard sidecar container into a workload</span>
<span class="w">  </span><span class="c1"># output all injected manifests and then deploy them</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>inject<span class="w"> </span>-f<span class="w"> </span>workload.yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-

<span class="w">  </span><span class="c1"># if you only want to get the injected workload yaml rather than</span>
<span class="w">  </span><span class="c1"># all manifests that includes the etcd cluster and the rpc service,</span>
<span class="w">  </span><span class="c1"># you can enable the apply-resources and then the manifests will be</span>
<span class="w">  </span><span class="c1"># created during the injection, finally you will get the injected</span>
<span class="w">  </span><span class="c1"># workload yaml</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>inject<span class="w"> </span>-f<span class="w"> </span>workload.yaml<span class="w"> </span>--apply-resources
</pre></div>
</div>
</section>
<section id="id70">
<h3>Options<a class="headerlink" href="#id70" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">apply</span><span class="o">-</span><span class="n">resources</span>                         <span class="n">Whether</span> <span class="n">to</span> <span class="n">apply</span> <span class="n">the</span> <span class="n">resources</span> <span class="n">including</span> <span class="n">the</span> <span class="n">etcd</span> <span class="n">cluster</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">rpc</span> <span class="n">service</span> <span class="k">if</span> <span class="n">you</span> <span class="n">enable</span> <span class="n">this</span> <span class="n">flag</span><span class="p">,</span> <span class="n">the</span> <span class="n">etcd</span> <span class="n">cluster</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">rpc</span> <span class="n">service</span> <span class="n">will</span> <span class="n">be</span> <span class="n">created</span> <span class="n">during</span> <span class="n">the</span> <span class="n">injection</span>
      <span class="o">--</span><span class="n">etcd</span><span class="o">-</span><span class="n">replicas</span> <span class="nb">int</span>                       <span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">etcd</span> <span class="n">replicas</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>                             <span class="n">The</span> <span class="n">yaml</span> <span class="n">of</span> <span class="n">workload</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                                    <span class="n">help</span> <span class="k">for</span> <span class="n">inject</span>
      <span class="o">--</span><span class="n">name</span> <span class="n">string</span>                             <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">sidecar</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-sidecar&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="n">output</span> <span class="n">string</span>                           <span class="n">The</span> <span class="n">output</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">the</span> <span class="n">command</span><span class="p">,</span> <span class="n">support</span> <span class="n">yaml</span> <span class="ow">and</span> <span class="n">json</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;yaml&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">owner</span><span class="o">-</span><span class="n">references</span> <span class="n">string</span>                 <span class="n">The</span> <span class="n">owner</span> <span class="n">reference</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">injectied</span> <span class="n">resources</span>
      <span class="o">--</span><span class="n">resource</span> <span class="n">string</span>                         <span class="n">The</span> <span class="n">resource</span> <span class="n">of</span> <span class="n">workload</span>
      <span class="o">--</span><span class="n">securityContext</span> <span class="n">string</span>                  <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">security</span> <span class="n">context</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">sidecar</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">cpu</span> <span class="n">string</span>                      <span class="n">the</span> <span class="n">cpu</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">envs</span> <span class="n">strings</span>                    <span class="n">The</span> <span class="n">environment</span> <span class="n">variables</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>                    <span class="n">the</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyardd:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>          <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">memory</span> <span class="n">string</span>                   <span class="n">the</span> <span class="n">memory</span> <span class="n">requests</span> <span class="ow">and</span> <span class="n">limits</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">container</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">enable</span>                   <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">image</span> <span class="n">string</span>             <span class="n">the</span> <span class="n">metic</span> <span class="n">image</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardcloudnative/vineyard-grok-exporter:latest&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">imagePullPolicy</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">imagePullPolicy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">metric</span> <span class="n">image</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;IfNotPresent&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">reserve_memory</span>                  <span class="n">Reserving</span> <span class="n">enough</span> <span class="n">physical</span> <span class="n">memory</span> <span class="n">pages</span> <span class="k">for</span> <span class="n">vineyardd</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">port</span> <span class="nb">int</span>                <span class="n">the</span> <span class="n">service</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">type</span> <span class="n">string</span>             <span class="n">the</span> <span class="n">service</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">service</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;ClusterIP&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">size</span> <span class="n">string</span>                     <span class="n">The</span> <span class="n">size</span> <span class="n">of</span> <span class="n">vineyardd</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">power</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">two</span> <span class="n">equivalents</span><span class="p">:</span> <span class="n">Ei</span><span class="p">,</span> <span class="n">Pi</span><span class="p">,</span> <span class="n">Ti</span><span class="p">,</span> <span class="n">Gi</span><span class="p">,</span> <span class="n">Mi</span><span class="p">,</span> <span class="n">Ki</span><span class="o">.</span> <span class="n">Defaults</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">means</span> <span class="ow">not</span> <span class="n">limited</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">socket</span> <span class="n">string</span>                   <span class="n">The</span> <span class="n">directory</span> <span class="n">on</span> <span class="n">host</span> <span class="k">for</span> <span class="n">the</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">file</span><span class="o">.</span> <span class="n">The</span> <span class="n">namespace</span> <span class="ow">and</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">your</span> <span class="n">vineyard</span> <span class="n">config</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;/var/run/vineyard-kubernetes/{{.Namespace}}/{{.Name}}&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">config</span> <span class="n">string</span>             <span class="n">If</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">the</span> <span class="n">spill</span> <span class="n">mechanism</span><span class="p">,</span> <span class="n">please</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">path</span> <span class="n">string</span>               <span class="n">The</span> <span class="n">path</span> <span class="n">of</span> <span class="n">spill</span> <span class="n">config</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">pv</span><span class="o">-</span><span class="n">pvc</span><span class="o">-</span><span class="n">spec</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">the</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="ow">and</span> <span class="n">persistent</span> <span class="n">volume</span> <span class="n">claim</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillLowerRate</span> <span class="n">string</span>     <span class="n">The</span> <span class="n">low</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.3&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">spill</span><span class="o">.</span><span class="n">spillUpperRate</span> <span class="n">string</span>     <span class="n">The</span> <span class="n">high</span> <span class="n">watermark</span> <span class="n">of</span> <span class="n">spilling</span> <span class="n">memory</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;0.8&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">streamThreshold</span> <span class="nb">int</span>             <span class="n">memory</span> <span class="n">threshold</span> <span class="n">of</span> <span class="n">streams</span> <span class="p">(</span><span class="n">percentage</span> <span class="n">of</span> <span class="n">total</span> <span class="n">memory</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">80</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">syncCRDs</span>                        <span class="n">enable</span> <span class="n">metrics</span> <span class="n">of</span> <span class="n">vineyardd</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">mountPath</span> <span class="n">string</span>         <span class="n">Set</span> <span class="n">the</span> <span class="n">mount</span> <span class="n">path</span> <span class="k">for</span> <span class="n">the</span> <span class="n">pvc</span>
      <span class="o">--</span><span class="n">sidecar</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">pvcname</span> <span class="n">string</span>           <span class="n">Set</span> <span class="n">the</span> <span class="n">pvc</span> <span class="n">name</span> <span class="k">for</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">vineyard</span> <span class="n">objects</span> <span class="n">persistently</span>
      <span class="o">--</span><span class="n">volume</span> <span class="n">string</span>                           <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">sidecar</span> <span class="n">container</span> <span class="n">volume</span>
      <span class="o">--</span><span class="n">volumeMount</span> <span class="n">string</span>                      <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">sidecar</span> <span class="n">container</span> <span class="n">volume</span> <span class="n">mount</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-inject-argo-workflow">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">inject</span> <span class="pre">argo-workflow</span></code><a class="headerlink" href="#vineyardctl-inject-argo-workflow" title="Link to this heading">¶</a></h2>
<p>Inject the vineyard volumes into the argo workflow</p>
<section id="id71">
<h3>Synopsis<a class="headerlink" href="#id71" title="Link to this heading">¶</a></h3>
<p>Inject the vineyard volumes into the argo workflow DAGs. You can input
the workflow manifest file and the injected manifest file with
vineyard volume will be output to the file with the suffix
“_with_vineyard”, such as “workflow_with_vineyard.yaml”.</p>
<p>Suppose the workflow manifest named “workflow.yaml” is as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">    </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/producer.py&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">    </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/consumer.py&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">    </span><span class="nt">dag</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
</pre></div>
</div>
<p>Assume the ‘producer’ and ‘consumer’ task all need to use vineyard
volume, you can inject the vineyard volume into the workflow manifest
with the following command:</p>
<p>$ vineyardctl inject argo-workflow -f workflow.yaml <br />
–templates=“producer,consumer” <br />
–vineyard-cluster=“vineyard-system/vineyardd-sample” <br />
–mount-path=“/vineyard/data” <br />
–dag=“dag” <br />
–tasks=“producer,consumer” <br />
–output-as-file</p>
<p>The injected manifest will be output to the file named “workflow_with_vineyard.yaml”.</p>
<p>$ cat workflow_with_vineyard.yaml</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">    </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/producer.py&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="c1">################## Injected #################</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/vineyard/data</span>
<span class="w">      </span><span class="c1">#############################################</span>
<span class="w">    </span><span class="c1">######################## Injected #######################</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">      </span><span class="nt">persistentVolumeClaim</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">claimName</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{inputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">    </span><span class="c1">#########################################################</span>
<span class="w">    </span><span class="c1">############## Injected #############</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">vineyard-objects-name</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="c1">#####################################</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">    </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/consumer.py&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="c1">################## Injected #################</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/vineyard/data</span>
<span class="w">      </span><span class="c1">#############################################</span>
<span class="w">    </span><span class="c1">######################## Injected #######################</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">      </span><span class="nt">persistentVolumeClaim</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">claimName</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{inputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">    </span><span class="c1">#########################################################</span>
<span class="w">    </span><span class="c1">############## Injected #############</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">vineyard-objects-name</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="c1">#####################################</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">    </span><span class="nt">dag</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="c1">################################# Injected ################################</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{tasks.vineyard-objects.outputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">          </span><span class="c1">###########################################################################</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">          </span><span class="c1">########### Injected ##########</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">          </span><span class="c1">###############################</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="c1">################################# Injected ################################</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{tasks.vineyard-objects.outputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">          </span><span class="c1">###########################################################################</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">          </span><span class="c1">########### Injected ##########</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">          </span><span class="c1">###############################</span>
<span class="w">      </span><span class="c1">########## Injected #########</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">      </span><span class="c1">#############################</span>
<span class="c1">############################# Injected ##########################</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create</span>
<span class="w">      </span><span class="nt">setOwnerReference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">manifest</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">apiVersion: v1</span>
<span class="w">        </span><span class="no">kind: PersistentVolumeClaim</span>
<span class="w">        </span><span class="no">metadata:</span>
<span class="w">          </span><span class="no">name: &#39;{{workflow.name}}-vineyard-objects-pvc&#39;</span>
<span class="w">        </span><span class="no">spec:</span>
<span class="w">          </span><span class="no">accessModes:</span>
<span class="w">          </span><span class="no">- ReadWriteMany</span>
<span class="w">          </span><span class="no">resources:</span>
<span class="w">            </span><span class="no">requests:</span>
<span class="w">              </span><span class="no">storage: 1Mi</span>
<span class="w">          </span><span class="no">storageClassName: vineyard-system.vineyardd-sample.csi</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">        </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">          </span><span class="nt">jsonPath</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{.metadata.name}&#39;</span><span class="w">  </span>
<span class="c1">##############################################################</span>
</pre></div>
</div>
<p>Suppose your workflow YAML only has a single template as follows.
$ cat workflow.yaml</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">    </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-benchmark:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;-m&quot;</span><span class="p p-Indicator">,</span><span class="w">  </span><span class="s">&quot;{{inputs.parameters.functions}}&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">    </span><span class="nt">dag</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer.py</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer.py</span>
</pre></div>
</div>
<p>Suppose only the ‘consumer’ task need to use vineyard volume,
you can inject the vineyard volume into the workflow manifest
with the following command:
$ vineyardctl inject argo-workflow -f workflow.yaml <br />
–templates=“MLops” <br />
–vineyard-cluster=“vineyard-system/vineyardd-sample” <br />
–mount-path=“/vineyard/data” <br />
–dag=“dag” <br />
–tasks=“consumer”</p>
<p>Then the injected manifest will be as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">container</span><span class="p">:</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-m</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{inputs.parameters.functions}}&#39;</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlops-benchmark:latest</span>
<span class="w">      </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="w">      </span><span class="c1">############# Injected ############</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/vineyard/data</span>
<span class="w">      </span><span class="c1">###################################</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">      </span><span class="c1">############# Injected ############</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">      </span><span class="c1">###################################</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">    </span><span class="c1">######################### Injected ########################</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">      </span><span class="nt">persistentVolumeClaim</span><span class="p">:</span>
<span class="w">        </span><span class="nt">claimName</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{inputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">    </span><span class="c1">###########################################################</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dag</span><span class="p">:</span>
<span class="w">      </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer.py</span>
<span class="w">          </span><span class="c1">################################# Injected #################################</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{tasks.vineyard-objects.outputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">          </span><span class="c1">############################################################################</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="c1">##### Injected #####</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="c1">####################</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer.py</span>
<span class="w">          </span><span class="c1">################################# Injected #################################</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{tasks.vineyard-objects.outputs.parameters.vineyard-objects-name}}&#39;</span>
<span class="w">          </span><span class="c1">############################################################################</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">producer</span>
<span class="w">        </span><span class="c1">##### Injected #####</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="c1">####################</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumer</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MLops</span>
<span class="w">      </span><span class="c1">########### Injected ###########</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">      </span><span class="c1">################################</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag</span>
<span class="w">  </span><span class="c1">################################# Injected #################################</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-objects-name</span>
<span class="w">        </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">          </span><span class="nt">jsonPath</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{.metadata.name}&#39;</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create</span>
<span class="w">      </span><span class="nt">manifest</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">        </span><span class="no">apiVersion: v1</span>
<span class="w">        </span><span class="no">kind: PersistentVolumeClaim</span>
<span class="w">        </span><span class="no">metadata:</span>
<span class="w">          </span><span class="no">name: &#39;{{workflow.name}}-vineyard-objects-pvc&#39;</span>
<span class="w">        </span><span class="no">spec:</span>
<span class="w">          </span><span class="no">accessModes:</span>
<span class="w">          </span><span class="no">- ReadWriteMany</span>
<span class="w">          </span><span class="no">resources:</span>
<span class="w">            </span><span class="no">requests:</span>
<span class="w">              </span><span class="no">storage: 1Mi</span>
<span class="w">          </span><span class="no">storageClassName: vineyard-system.vineyardd-sample.csi</span>
<span class="w">      </span><span class="nt">setOwnerReference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1">############################################################################</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">inject</span> <span class="n">argo</span><span class="o">-</span><span class="n">workflow</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-inject"><span class="std std-ref">vineyardctl inject</span></a>	 - Inject the vineyard sidecar container into a workload</p></li>
</ul>
</section>
<section id="id72">
<h3>Examples<a class="headerlink" href="#id72" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Inject the vineyard volumes into the argo workflow</span>
<span class="w">  </span>$<span class="w"> </span>vineyardctl<span class="w"> </span>inject<span class="w"> </span>argo-workflow<span class="w"> </span>-f<span class="w"> </span>workflow.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--templates<span class="o">=</span><span class="s2">&quot;preprocess-data,train-data&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vineyard-cluster<span class="o">=</span><span class="s2">&quot;vineyard-system/vineyardd-sample&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mount-path<span class="o">=</span><span class="s2">&quot;/vineyard/data&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dag<span class="o">=</span><span class="s2">&quot;dag&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tasks<span class="o">=</span><span class="s2">&quot;preprocess-data,train-data&quot;</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Suppose you only have a single template in the workflow</span>
<span class="w">  </span><span class="c1"># you could set only one template name in the --templates flag</span>
<span class="w">  </span>$<span class="w"> </span>vineyardctl<span class="w"> </span>inject<span class="w"> </span>argo-workflow<span class="w"> </span>-f<span class="w"> </span>workflow.yaml<span class="w"> </span><span class="se">\</span>
--templates<span class="o">=</span><span class="s2">&quot;mlops&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyard-cluster<span class="o">=</span><span class="s2">&quot;vineyard-system/vineyardd-sample&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mount-path<span class="o">=</span><span class="s2">&quot;/vineyard/data&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dag<span class="o">=</span><span class="s2">&quot;dag&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tasks<span class="o">=</span><span class="s2">&quot;preprocess-data,test-data&quot;</span>
</pre></div>
</div>
</section>
<section id="id73">
<h3>Options<a class="headerlink" href="#id73" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">dag</span> <span class="n">string</span>                <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">dag</span> <span class="n">which</span> <span class="n">will</span> <span class="n">be</span> <span class="n">injected</span> <span class="k">with</span> <span class="n">vineyard</span> <span class="n">volumes</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>               <span class="n">The</span> <span class="n">file</span> <span class="n">name</span> <span class="n">of</span> <span class="n">argo</span> <span class="n">workflow</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                      <span class="n">help</span> <span class="k">for</span> <span class="n">argo</span><span class="o">-</span><span class="n">workflow</span>
      <span class="o">--</span><span class="n">mount</span><span class="o">-</span><span class="n">path</span> <span class="n">string</span>         <span class="n">The</span> <span class="n">mount</span> <span class="n">path</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">volumes</span>
      <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="k">as</span><span class="o">-</span><span class="n">file</span>            <span class="n">Whether</span> <span class="n">to</span> <span class="n">output</span> <span class="n">the</span> <span class="n">injected</span> <span class="n">workflow</span> <span class="k">as</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">falseThe</span> <span class="n">output</span> <span class="n">file</span> <span class="n">name</span> <span class="n">will</span> <span class="n">add</span> <span class="n">a</span> <span class="n">suffix</span> <span class="s1">&#39;_with_vineyard&#39;</span> <span class="n">to</span> <span class="n">the</span> <span class="n">original</span> <span class="n">file</span> <span class="n">name</span>
      <span class="o">--</span><span class="n">tasks</span> <span class="n">strings</span>             <span class="n">The</span> <span class="nb">set</span> <span class="n">of</span> <span class="n">task</span> <span class="n">names</span> <span class="n">under</span> <span class="n">the</span> <span class="n">dag</span>
  <span class="o">-</span><span class="n">t</span><span class="p">,</span> <span class="o">--</span><span class="n">templates</span> <span class="n">strings</span>         <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">workflow</span> <span class="n">template</span> <span class="n">which</span> <span class="n">will</span> <span class="n">be</span> <span class="n">injected</span> <span class="k">with</span> <span class="n">vineyard</span> <span class="n">volumes</span>
      <span class="o">--</span><span class="n">vineyard</span><span class="o">-</span><span class="n">cluster</span> <span class="n">string</span>   <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">cluster</span> <span class="n">which</span> <span class="n">the</span> <span class="n">argo</span> <span class="n">workflow</span> <span class="n">will</span> <span class="n">use</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-ls">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span></code><a class="headerlink" href="#vineyardctl-ls" title="Link to this heading">¶</a></h2>
<p>List vineyard objects, metadatas or blobs</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-ls-blobs"><span class="std std-ref">vineyardctl ls blobs</span></a>	 - List vineyard blobs</p></li>
<li><p><a class="reference internal" href="#vineyardctl-ls-metadatas"><span class="std std-ref">vineyardctl ls metadatas</span></a>	 - List vineyard metadatas</p></li>
<li><p><a class="reference internal" href="#vineyardctl-ls-objects"><span class="std std-ref">vineyardctl ls objects</span></a>	 - List vineyard objects</p></li>
</ul>
<section id="id74">
<h3>Examples<a class="headerlink" href="#id74" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Connect the vineyardd server with IPC client</span>
<span class="w">  </span><span class="c1"># List the vineyard objects no more than 10</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--limit<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List the vineyard blobs no more than 10</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--limit<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List the vineyard objects with the specified pattern</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;vineyard::Tensor&lt;.*&gt;&quot;</span><span class="w"> </span>--regex<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># Connect the vineyardd server with RPC client</span>
<span class="w">  </span><span class="c1"># List the vineyard metadatas no more than 1000</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--rpc-socket<span class="w"> </span><span class="m">127</span>.0.0.1:9600<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>

<span class="w">  </span><span class="c1"># Connect the vineyard deployment with PRC client</span>
<span class="w">  </span><span class="c1"># List the vineyard objects no more than 1000</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system
</pre></div>
</div>
</section>
<section id="id75">
<h3>Options<a class="headerlink" href="#id75" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">ls</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-ls-blobs">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">blobs</span></code><a class="headerlink" href="#vineyardctl-ls-blobs" title="Link to this heading">¶</a></h2>
<p>List vineyard blobs</p>
<section id="id76">
<h3>Synopsis<a class="headerlink" href="#id76" title="Link to this heading">¶</a></h3>
<p>List vineyard blobs and only support IPC socket.
If you don’t specify the ipc socket every time, you can set it as the
environment variable VINEYARD_IPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">ls</span> <span class="n">blobs</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-ls"><span class="std std-ref">vineyardctl ls</span></a>	 - List vineyard objects, metadatas or blobs</p></li>
</ul>
</section>
<section id="id77">
<h3>Examples<a class="headerlink" href="#id77" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># List no more than 10 vineyard blobs</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--limit<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List no more than 1000 vineyard blobs</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># List vineyard blobs with the name matching</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;vineyard::Tensor&lt;.*&gt;&quot;</span><span class="w"> </span>--regex<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>
<span class="w">  </span><span class="c1"># List vineyard blobs with the regex pattern</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;*DataFrame*&quot;</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>
<span class="w">  </span><span class="c1"># If you set the environment variable VINEYARD_IPC_SOCKET</span>
<span class="w">  </span><span class="c1"># you can use the following command to list vineyard blobs</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>blobs<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
</section>
<section id="id78">
<h3>Options<a class="headerlink" href="#id78" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">blobs</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
  <span class="o">-</span><span class="n">l</span><span class="p">,</span> <span class="o">--</span><span class="n">limit</span> <span class="nb">int</span>                <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">objects</span> <span class="n">to</span> <span class="k">return</span> <span class="p">(</span><span class="n">default</span> <span class="mi">5</span><span class="p">)</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-ls-metadatas">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">metadatas</span></code><a class="headerlink" href="#vineyardctl-ls-metadatas" title="Link to this heading">¶</a></h2>
<p>List vineyard metadatas</p>
<section id="id79">
<h3>Synopsis<a class="headerlink" href="#id79" title="Link to this heading">¶</a></h3>
<p>List vineyard metadatas and support IPC socket,
RPC socket and vineyard deployment. If you don’t specify the ipc socket or rpc socket
every time, you can set it as the environment variable VINEYARD_IPC_SOCKET or
VINEYARD_RPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">ls</span> <span class="n">metadatas</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-ls"><span class="std std-ref">vineyardctl ls</span></a>	 - List vineyard objects, metadatas or blobs</p></li>
</ul>
</section>
<section id="id80">
<h3>Examples<a class="headerlink" href="#id80" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># List no more than 10 vineyard metadatas</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--limit<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>
<span class="w">  </span><span class="c1"># List no more than 1000 vineyard metadatas</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--rpc-socket<span class="w"> </span><span class="m">127</span>.0.0.1:9600<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># List vineyard metadatas with the name matching the regex pattern</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;vineyard::Blob&quot;</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List vineyard metadatas of the vineyard deployment</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--deployment-name<span class="w"> </span>vineyardd-sample<span class="w"> </span>-n<span class="w"> </span>vineyard-system<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># List vineyard metadatas sorted by the instance id</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--sorted-key<span class="w"> </span>instance_id<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List vineyard metadatas sorted by the type and print the output as json format</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>metadatas<span class="w"> </span>--sorted-key<span class="w"> </span><span class="nb">type</span><span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--format<span class="w"> </span>json<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
</pre></div>
</div>
</section>
<section id="id81">
<h3>Options<a class="headerlink" href="#id81" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      --deployment-name string   the name of vineyard deployment
  -o, --format string            the output format, support table or json, default is table (default &quot;table&quot;)
      --forward-port int         the forward port of vineyard deployment (default 9600)
  -h, --help                     help for metadatas
      --ipc-socket string        vineyard IPC socket path
  -l, --limit int                maximum number of objects to return (default 5)
  -p, --pattern string           string that will be matched against the object’s typenames (default &quot;*&quot;)
      --port int                 the port of vineyard deployment (default 9600)
  -r, --regex                    regex pattern to match the object’s typenames
      --rpc-socket string        vineyard RPC socket path
  -k, --sorted-key string        key to sort the objects, support:
                                 - id: object id, the default value.
                                 - typename: object typename, e.g. tensor, dataframe, etc.
                                 - type: object type, e.g. global, local, etc.
                                 - instance_id: object instance id. (default &quot;id&quot;)
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-ls-objects">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">objects</span></code><a class="headerlink" href="#vineyardctl-ls-objects" title="Link to this heading">¶</a></h2>
<p>List vineyard objects</p>
<section id="id82">
<h3>Synopsis<a class="headerlink" href="#id82" title="Link to this heading">¶</a></h3>
<p>List vineyard objects and support IPC socket,
RPC socket and vineyard deployment. If you don’t specify the ipc socket or rpc socket
every time, you can set it as the environment variable VINEYARD_IPC_SOCKET or
VINEYARD_RPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">ls</span> <span class="n">objects</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-ls"><span class="std std-ref">vineyardctl ls</span></a>	 - List vineyard objects, metadatas or blobs</p></li>
</ul>
</section>
<section id="id83">
<h3>Examples<a class="headerlink" href="#id83" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># List no more than 10 vineyard objects</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--limit<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List any vineyard objects and no more than 1000 objects</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span>

<span class="w">  </span><span class="c1"># List vineyard objects with the name matching the regex pattern</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">&quot;vineyard::Tensor&lt;.*&gt;&quot;</span><span class="w"> </span>--regex<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List vineyard objects and output as json format</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--format<span class="w"> </span>json<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock

<span class="w">  </span><span class="c1"># List vineyard objects sorted by the typename</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>ls<span class="w"> </span>objects<span class="w"> </span>--sorted-key<span class="w"> </span>typename<span class="w"> </span>--limit<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
</pre></div>
</div>
</section>
<section id="id84">
<h3>Options<a class="headerlink" href="#id84" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      --deployment-name string   the name of vineyard deployment
  -o, --format string            the output format, support table or json, default is table (default &quot;table&quot;)
      --forward-port int         the forward port of vineyard deployment (default 9600)
  -h, --help                     help for objects
      --ipc-socket string        vineyard IPC socket path
  -l, --limit int                maximum number of objects to return (default 5)
  -p, --pattern string           string that will be matched against the object’s typenames (default &quot;*&quot;)
      --port int                 the port of vineyard deployment (default 9600)
  -r, --regex                    regex pattern to match the object’s typenames
      --rpc-socket string        vineyard RPC socket path
  -k, --sorted-key string        key to sort the objects, support:
                                 - id: object id, the default value.
                                 - typename: object typename, e.g. tensor, dataframe, etc.
                                 - type: object type, e.g. global, local, etc.
                                 - instance_id: object instance id. (default &quot;id&quot;)
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-manager">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">manager</span></code><a class="headerlink" href="#vineyardctl-manager" title="Link to this heading">¶</a></h2>
<p>Start the manager of vineyard operator</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">manager</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
</ul>
<section id="id85">
<h3>Examples<a class="headerlink" href="#id85" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># start the manager of vineyard operator with default configuration</span>
<span class="w">  </span><span class="c1"># (Enable the controller, webhooks and scheduler)</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>manager

<span class="w">  </span><span class="c1"># start the manager of vineyard operator without webhooks</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>manager<span class="w"> </span>--enable-webhook<span class="o">=</span><span class="nb">false</span>

<span class="w">  </span><span class="c1"># start the manager of vineyard operator without scheduler</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>manager<span class="w"> </span>--enable-scheduler<span class="o">=</span><span class="nb">false</span>

<span class="w">  </span><span class="c1"># only start the controller</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>manager<span class="w"> </span>--enable-webhook<span class="o">=</span><span class="nb">false</span><span class="w"> </span>--enable-scheduler<span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
</section>
<section id="id86">
<h3>Options<a class="headerlink" href="#id86" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">scheduler</span>                   <span class="n">Enable</span> <span class="n">scheduler</span> <span class="k">for</span> <span class="n">controller</span> <span class="n">manager</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
      <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">webhook</span>                     <span class="n">Enable</span> <span class="n">webhook</span> <span class="k">for</span> <span class="n">controller</span> <span class="n">manager</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="n">true</span><span class="p">)</span>
      <span class="o">--</span><span class="n">health</span><span class="o">-</span><span class="n">probe</span><span class="o">-</span><span class="n">bind</span><span class="o">-</span><span class="n">address</span> <span class="n">string</span>   <span class="n">The</span> <span class="n">address</span> <span class="n">the</span> <span class="n">probe</span> <span class="n">endpoint</span> <span class="n">binds</span> <span class="n">to</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;:8081&quot;</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                               <span class="n">help</span> <span class="k">for</span> <span class="n">manager</span>
      <span class="o">--</span><span class="n">leader</span><span class="o">-</span><span class="n">elect</span>                       <span class="n">Enable</span> <span class="n">leader</span> <span class="n">election</span> <span class="k">for</span> <span class="n">controller</span> <span class="n">manager</span><span class="o">.</span> <span class="n">Enabling</span> <span class="n">this</span> <span class="n">will</span> <span class="n">ensure</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">one</span> <span class="n">active</span> <span class="n">controller</span> <span class="n">manager</span><span class="o">.</span>
      <span class="o">--</span><span class="n">metrics</span><span class="o">-</span><span class="n">bind</span><span class="o">-</span><span class="n">address</span> <span class="n">string</span>        <span class="n">The</span> <span class="n">address</span> <span class="n">the</span> <span class="n">metric</span> <span class="n">endpoint</span> <span class="n">binds</span> <span class="n">to</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;127.0.0.1:8080&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">scheduler</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">file</span> <span class="n">string</span>       <span class="n">The</span> <span class="n">location</span> <span class="n">of</span> <span class="n">scheduler</span> <span class="n">plugin</span><span class="s1">&#39;s configuration file. (default &quot;/etc/kubernetes/scheduler.yaml&quot;)</span>
      <span class="o">--</span><span class="n">webhook</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="nb">dir</span> <span class="n">string</span>            <span class="n">The</span> <span class="n">directory</span> <span class="n">to</span> <span class="n">store</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">certificates</span><span class="o">.</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;/etc/webhook/certs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-put">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">put</span></code><a class="headerlink" href="#vineyardctl-put" title="Link to this heading">¶</a></h2>
<p>Put basic data type into vineyard</p>
<section id="id87">
<h3>Synopsis<a class="headerlink" href="#id87" title="Link to this heading">¶</a></h3>
<p>Put basic data type into vineyard and only support IPC socket.
It receives the flag –value as string and will print object id if succeed.
If you don’t specify the ipc socket every time, you can set it as the
environment variable VINEYARD_IPC_SOCKET.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">put</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
</ul>
</section>
<section id="id88">
<h3>Examples<a class="headerlink" href="#id88" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># put value into vineyard with the given ipc socket</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>put<span class="w"> </span>--value<span class="w"> </span><span class="m">12345</span><span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>vineyardctl<span class="w"> </span>put<span class="w"> </span>--value<span class="w"> </span>hello,world<span class="w"> </span>--ipc-socket<span class="w"> </span>/var/run/vineyard.sock
<span class="w">  </span>
<span class="w">  </span><span class="c1"># If you set the environment variable VINEYARD_IPC_SOCKET</span>
<span class="w">  </span><span class="c1"># you can use the following command to get vineyard blob</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>put<span class="w"> </span>--value<span class="w"> </span><span class="m">12345</span>
</pre></div>
</div>
</section>
<section id="id89">
<h3>Options<a class="headerlink" href="#id89" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="o">--</span><span class="n">deployment</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="nb">format</span> <span class="n">string</span>            <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span><span class="p">,</span> <span class="n">support</span> <span class="n">table</span> <span class="ow">or</span> <span class="n">json</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">table</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">forward</span><span class="o">-</span><span class="n">port</span> <span class="nb">int</span>         <span class="n">the</span> <span class="n">forward</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                     <span class="n">help</span> <span class="k">for</span> <span class="n">put</span>
      <span class="o">--</span><span class="n">ipc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">IPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">port</span> <span class="nb">int</span>                 <span class="n">the</span> <span class="n">port</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">deployment</span> <span class="p">(</span><span class="n">default</span> <span class="mi">9600</span><span class="p">)</span>
      <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">socket</span> <span class="n">string</span>        <span class="n">vineyard</span> <span class="n">RPC</span> <span class="n">socket</span> <span class="n">path</span>
      <span class="o">--</span><span class="n">value</span> <span class="n">string</span>             <span class="n">vineyard</span> <span class="n">blob</span> <span class="n">value</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-schedule">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span></code><a class="headerlink" href="#vineyardctl-schedule" title="Link to this heading">¶</a></h2>
<p>Schedule a workload or a workflow to existing vineyard cluster.</p>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl"><span class="std std-ref">vineyardctl</span></a>	 - vineyardctl is the command-line tool for interact with the Vineyard Operator.</p></li>
<li><p><a class="reference internal" href="#vineyardctl-schedule-workflow"><span class="std std-ref">vineyardctl schedule workflow</span></a>	 - Schedule a workflow based on the vineyard cluster</p></li>
<li><p><a class="reference internal" href="#vineyardctl-schedule-workload"><span class="std std-ref">vineyardctl schedule workload</span></a>	 - Schedule the workload to a vineyard cluster</p></li>
</ul>
<section id="id90">
<h3>Examples<a class="headerlink" href="#id90" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Schedule a workload to a vineyard cluster</span>
<span class="w">  </span><span class="c1"># it will add PodAffinity to the workload</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workload<span class="w"> </span>--resource<span class="w"> </span><span class="s1">&#39;{kubernetes workload json string}&#39;</span>

<span class="w">  </span><span class="c1"># schedule a workflow to the vineyard cluster</span>
<span class="w">  </span><span class="c1"># it will use the best-effort scheduling strategy</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workflow<span class="w"> </span>--file<span class="w"> </span>workflow.yaml
</pre></div>
</div>
</section>
<section id="id91">
<h3>Options<a class="headerlink" href="#id91" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">schedule</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-schedule-workflow">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span> <span class="pre">workflow</span></code><a class="headerlink" href="#vineyardctl-schedule-workflow" title="Link to this heading">¶</a></h2>
<p>Schedule a workflow based on the vineyard cluster</p>
<section id="id92">
<h3>Synopsis<a class="headerlink" href="#id92" title="Link to this heading">¶</a></h3>
<p>Schedule a workflow based on the vineyard cluster.
It will apply the workflow to kubernetes cluster and deploy the workload
of the workflow on the vineyard cluster with the best-fit strategy.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">schedule</span> <span class="n">workflow</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-schedule"><span class="std std-ref">vineyardctl schedule</span></a>	 - Schedule a workload or a workflow to existing vineyard cluster.</p></li>
</ul>
</section>
<section id="id93">
<h3>Examples<a class="headerlink" href="#id93" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># schedule a workflow to the vineyard cluster with the best-fit strategy</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workflow<span class="w"> </span>--file<span class="w"> </span>workflow.yaml
<span class="w">  </span>
<span class="w">  </span><span class="c1"># schedule a workflow without CRD installed</span>
<span class="w">  </span><span class="c1"># Notice, it only works for the workflow built by pods</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workflow<span class="w"> </span>--file<span class="w"> </span>pod-workflow.yaml<span class="w"> </span>--without-crd
</pre></div>
</div>
</section>
<section id="id94">
<h3>Options<a class="headerlink" href="#id94" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">workflow</span> <span class="n">file</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>          <span class="n">help</span> <span class="k">for</span> <span class="n">workflow</span>
      <span class="o">--</span><span class="n">without</span><span class="o">-</span><span class="n">crd</span>   <span class="n">whether</span> <span class="n">the</span> <span class="n">CRD</span><span class="p">(</span><span class="n">especially</span> <span class="k">for</span> <span class="n">GlobalObject</span> <span class="ow">and</span> <span class="n">LocalObject</span><span class="p">)</span> <span class="ow">is</span> <span class="n">installed</span>
</pre></div>
</div>
</section>
</section>
<section id="vineyardctl-schedule-workload">
<h2><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span> <span class="pre">workload</span></code><a class="headerlink" href="#vineyardctl-schedule-workload" title="Link to this heading">¶</a></h2>
<p>Schedule the workload to a vineyard cluster</p>
<section id="id95">
<h3>Synopsis<a class="headerlink" href="#id95" title="Link to this heading">¶</a></h3>
<p>Schedule the workload to a vineyard cluster.
It will add the podAffinity to the workload so that the workload
will be scheduled to the vineyard cluster. Besides, if the workload
does not have the socket volumeMount and volume, it will add one.</p>
<p>Assume you have the following workload yaml:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-client</span>
<span class="w">  </span><span class="c1"># Notice, you must set the namespace here</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-job</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.10</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;import</span><span class="nv"> </span><span class="s">time;</span><span class="nv"> </span><span class="s">time.sleep(100000)&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Then you can run the following command to add the podAffinity and socket volume
to the workload yaml:</p>
<p>$ vineyard schedule workload -f workload.yaml -o yaml</p>
<p>After that, you will get the following workload yaml:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-client</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-job</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">   </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">   </span><span class="w w-Error"> </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">affinity</span><span class="p">:</span>
<span class="w">        </span><span class="nt">podAffinity</span><span class="p">:</span>
<span class="w">          </span><span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">labelSelector</span><span class="p">:</span>
<span class="w">              </span><span class="nt">matchExpressions</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.kubernetes.io/instance</span>
<span class="w">                </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">In</span>
<span class="w">                </span><span class="nt">values</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-system-vineyardd-sample</span>
<span class="w">            </span><span class="nt">namespaces</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-system</span>
<span class="w">            </span><span class="nt">topologyKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/hostname</span>

<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">import time; time.sleep(100000)</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VINEYARD_IPC_SOCKET</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/vineyard.sock</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.10</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hostPath</span><span class="p">:</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/vineyard-kubernetes/vineyard-system/vineyardd-sample</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vineyard-socket</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vineyardctl</span> <span class="n">schedule</span> <span class="n">workload</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>SEE ALSO</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#vineyardctl-schedule"><span class="std std-ref">vineyardctl schedule</span></a>	 - Schedule a workload or a workflow to existing vineyard cluster.</p></li>
</ul>
</section>
<section id="id96">
<h3>Examples<a class="headerlink" href="#id96" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Add the podAffinity to the workload yaml</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workload<span class="w"> </span>-f<span class="w"> </span>workload.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vineyardd-namespace<span class="w"> </span>vineyard-system

<span class="w">  </span><span class="c1"># Add the podAffinity to the workload for the specific vineyard cluster</span>
<span class="w">  </span>vineyardctl<span class="w"> </span>schedule<span class="w"> </span>workload<span class="w"> </span>--resource<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;apiVersion&quot;: &quot;apps/v1&quot;,</span>
<span class="s1">    &quot;kind&quot;: &quot;Deployment&quot;,</span>
<span class="s1">    &quot;metadata&quot;: {</span>
<span class="s1">      &quot;name&quot;: &quot;web-server&quot;</span>
<span class="s1">    },</span>
<span class="s1">    &quot;spec&quot;: {</span>
<span class="s1">      &quot;selector&quot;: {</span>
<span class="s1">      &quot;matchLabels&quot;: {</span>
<span class="s1">        &quot;app&quot;: &quot;web-store&quot;</span>
<span class="s1">      }</span>
<span class="s1">      },</span>
<span class="s1">      &quot;replicas&quot;: 3,</span>
<span class="s1">      &quot;template&quot;: {</span>
<span class="s1">      &quot;metadata&quot;: {</span>
<span class="s1">        &quot;labels&quot;: {</span>
<span class="s1">        &quot;app&quot;: &quot;web-store&quot;</span>
<span class="s1">        }</span>
<span class="s1">      },</span>
<span class="s1">      &quot;spec&quot;: {</span>
<span class="s1">        &quot;affinity&quot;: {</span>
<span class="s1">        &quot;podAntiAffinity&quot;: {</span>
<span class="s1">          &quot;requiredDuringSchedulingIgnoredDuringExecution&quot;: [</span>
<span class="s1">          {</span>
<span class="s1">            &quot;labelSelector&quot;: {</span>
<span class="s1">            &quot;matchExpressions&quot;: [</span>
<span class="s1">              {</span>
<span class="s1">              &quot;key&quot;: &quot;app&quot;,</span>
<span class="s1">              &quot;operator&quot;: &quot;In&quot;,</span>
<span class="s1">              &quot;values&quot;: [</span>
<span class="s1">                &quot;web-store&quot;</span>
<span class="s1">              ]</span>
<span class="s1">              }</span>
<span class="s1">            ]</span>
<span class="s1">            },</span>
<span class="s1">            &quot;topologyKey&quot;: &quot;kubernetes.io/hostname&quot;</span>
<span class="s1">          }</span>
<span class="s1">          ]</span>
<span class="s1">        },</span>
<span class="s1">        &quot;podAffinity&quot;: {</span>
<span class="s1">          &quot;requiredDuringSchedulingIgnoredDuringExecution&quot;: [</span>
<span class="s1">          {</span>
<span class="s1">            &quot;labelSelector&quot;: {</span>
<span class="s1">            &quot;matchExpressions&quot;: [</span>
<span class="s1">              {</span>
<span class="s1">              &quot;key&quot;: &quot;app&quot;,</span>
<span class="s1">              &quot;operator&quot;: &quot;In&quot;,</span>
<span class="s1">              &quot;values&quot;: [</span>
<span class="s1">                &quot;store&quot;</span>
<span class="s1">              ]</span>
<span class="s1">              }</span>
<span class="s1">            ]</span>
<span class="s1">            },</span>
<span class="s1">            &quot;topologyKey&quot;: &quot;kubernetes.io/hostname&quot;</span>
<span class="s1">          }</span>
<span class="s1">          ]</span>
<span class="s1">        }</span>
<span class="s1">        },</span>
<span class="s1">        &quot;containers&quot;: [</span>
<span class="s1">        {</span>
<span class="s1">          &quot;name&quot;: &quot;web-app&quot;,</span>
<span class="s1">          &quot;image&quot;: &quot;nginx:1.16-alpine&quot;</span>
<span class="s1">        }</span>
<span class="s1">        ]</span>
<span class="s1">      }</span>
<span class="s1">      }</span>
<span class="s1">    }</span>
<span class="s1">    }&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-name<span class="w"> </span>vineyardd-sample<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--vineyardd-namespace<span class="w"> </span>vineyard-system
</pre></div>
</div>
</section>
<section id="id97">
<h3>Options<a class="headerlink" href="#id97" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">file</span> <span class="n">string</span>                  <span class="n">the</span> <span class="n">file</span> <span class="n">path</span> <span class="n">of</span> <span class="n">workload</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                         <span class="n">help</span> <span class="k">for</span> <span class="n">workload</span>
  <span class="o">-</span><span class="n">o</span><span class="p">,</span> <span class="o">--</span><span class="n">output</span> <span class="n">string</span>                <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span> <span class="k">for</span> <span class="n">vineyardctl</span> <span class="n">schedule</span> <span class="n">workload</span> <span class="n">command</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">resource</span> <span class="n">string</span>              <span class="n">the</span> <span class="n">json</span> <span class="n">string</span> <span class="n">of</span> <span class="n">kubernetes</span> <span class="n">workload</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">-</span><span class="n">name</span> <span class="n">string</span>        <span class="n">the</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">cluster</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyardd-sample&quot;</span><span class="p">)</span>
      <span class="o">--</span><span class="n">vineyardd</span><span class="o">-</span><span class="n">namespace</span> <span class="n">string</span>   <span class="n">the</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">vineyard</span> <span class="n">cluster</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;vineyard-system&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
<div class="related-pages">
  <a class="next-page" href="../../tutorials/data-processing.html">
      <div class="page-info">
        <div class="context">
          <span>Next</span>
        </div>
        <div class="title">Data processing</div>
      </div>
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
    </a>
  <a class="prev-page" href="vineyard-operator.html">
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
      <div class="page-info">
        <div class="context">
          <span>Previous</span>
        </div>
        
        <div class="title">Vineyard Operator</div>
        
      </div>
    </a>
</div>

<!-- index page doesn't have prev -->
  <hr/>

  <script src="https://giscus.app/client.js"
    data-repo="v6d-io/v6d"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzMDY2MzEyMTE="
    data-category="General"
    data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyNDA3MTg2"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="0"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6CYXWKLJB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6CYXWKLJB8');
</script>

<div class="bottom-of-page">
  <div class="left-details">
    <div class="copyright">
        Copyright &#169; 2020-2023, The Vineyard Authors
    </div>
    Rendered with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/pradyunsg/furo">Furo</a>
    <p>The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation,
       please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage page</a>.
    </p>
  </div>
  <div class="right-details">
    <div class="icons"><a class="muted-link" href="https://github.com//" aria-label="On GitHub">
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
      </a>
    </div>
    <div>
      <a href="https://www.cncf.io/sandbox-projects/"><img src="https://v6d.io/_static/cncf-color.svg" alt="CLOUD NATIVE COMPUTING FOUNDATION" width="100%" style="max-width: 200px;"/></p>
    </div>
  </div>
</div>

      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span></code></a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#vineyardctl-create"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span></code></a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#id1">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-create-backup"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">backup</span></code></a><ul>
<li><a class="reference internal" href="#id2">Synopsis</a></li>
<li><a class="reference internal" href="#id3">Examples</a></li>
<li><a class="reference internal" href="#id4">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-create-operation"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">operation</span></code></a><ul>
<li><a class="reference internal" href="#id5">Synopsis</a></li>
<li><a class="reference internal" href="#id6">Examples</a></li>
<li><a class="reference internal" href="#id7">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-create-recover"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">create</span> <span class="pre">recover</span></code></a><ul>
<li><a class="reference internal" href="#id8">Synopsis</a></li>
<li><a class="reference internal" href="#id9">Examples</a></li>
<li><a class="reference internal" href="#id10">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-csi"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">csi</span></code></a><ul>
<li><a class="reference internal" href="#id11">Examples</a></li>
<li><a class="reference internal" href="#id12">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span></code></a><ul>
<li><a class="reference internal" href="#id13">Examples</a></li>
<li><a class="reference internal" href="#id14">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-backup"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">backup</span></code></a><ul>
<li><a class="reference internal" href="#id15">Synopsis</a></li>
<li><a class="reference internal" href="#id16">Examples</a></li>
<li><a class="reference internal" href="#id17">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-csidriver"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">csidriver</span></code></a><ul>
<li><a class="reference internal" href="#id18">Examples</a></li>
<li><a class="reference internal" href="#id19">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-operation"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">operation</span></code></a><ul>
<li><a class="reference internal" href="#id20">Examples</a></li>
<li><a class="reference internal" href="#id21">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-operator"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">operator</span></code></a><ul>
<li><a class="reference internal" href="#id22">Examples</a></li>
<li><a class="reference internal" href="#id23">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-recover"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">recover</span></code></a><ul>
<li><a class="reference internal" href="#id24">Examples</a></li>
<li><a class="reference internal" href="#id25">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-vineyard-cluster"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyard-cluster</span></code></a><ul>
<li><a class="reference internal" href="#id26">Examples</a></li>
<li><a class="reference internal" href="#id27">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-vineyard-deployment"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyard-deployment</span></code></a><ul>
<li><a class="reference internal" href="#id28">Examples</a></li>
<li><a class="reference internal" href="#id29">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-delete-vineyardd"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">delete</span> <span class="pre">vineyardd</span></code></a><ul>
<li><a class="reference internal" href="#id30">Examples</a></li>
<li><a class="reference internal" href="#id31">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span></code></a><ul>
<li><a class="reference internal" href="#id32">Examples</a></li>
<li><a class="reference internal" href="#id33">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-backup-job"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">backup-job</span></code></a><ul>
<li><a class="reference internal" href="#id34">Synopsis</a></li>
<li><a class="reference internal" href="#id35">Examples</a></li>
<li><a class="reference internal" href="#id36">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-csidriver"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">csidriver</span></code></a><ul>
<li><a class="reference internal" href="#id37">Synopsis</a></li>
<li><a class="reference internal" href="#id38">Examples</a></li>
<li><a class="reference internal" href="#id39">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-operator"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">operator</span></code></a><ul>
<li><a class="reference internal" href="#id40">Synopsis</a></li>
<li><a class="reference internal" href="#id41">Examples</a></li>
<li><a class="reference internal" href="#id42">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-recover-job"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">recover-job</span></code></a><ul>
<li><a class="reference internal" href="#id43">Synopsis</a></li>
<li><a class="reference internal" href="#id44">Examples</a></li>
<li><a class="reference internal" href="#id45">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-vineyard-cluster"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyard-cluster</span></code></a><ul>
<li><a class="reference internal" href="#id46">Examples</a></li>
<li><a class="reference internal" href="#id47">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-vineyard-deployment"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyard-deployment</span></code></a><ul>
<li><a class="reference internal" href="#id48">Synopsis</a></li>
<li><a class="reference internal" href="#id49">Examples</a></li>
<li><a class="reference internal" href="#id50">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-deploy-vineyardd"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">deploy</span> <span class="pre">vineyardd</span></code></a><ul>
<li><a class="reference internal" href="#id51">Synopsis</a></li>
<li><a class="reference internal" href="#id52">Examples</a></li>
<li><a class="reference internal" href="#id53">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-get"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span></code></a><ul>
<li><a class="reference internal" href="#id54">Examples</a></li>
<li><a class="reference internal" href="#id55">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-get-blob"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">blob</span></code></a><ul>
<li><a class="reference internal" href="#id56">Synopsis</a></li>
<li><a class="reference internal" href="#id57">Examples</a></li>
<li><a class="reference internal" href="#id58">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-get-cluster-info"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">cluster-info</span></code></a><ul>
<li><a class="reference internal" href="#id59">Synopsis</a></li>
<li><a class="reference internal" href="#id60">Examples</a></li>
<li><a class="reference internal" href="#id61">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-get-metadata"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">metadata</span></code></a><ul>
<li><a class="reference internal" href="#id62">Synopsis</a></li>
<li><a class="reference internal" href="#id63">Examples</a></li>
<li><a class="reference internal" href="#id64">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-get-object"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">get</span> <span class="pre">object</span></code></a><ul>
<li><a class="reference internal" href="#id65">Synopsis</a></li>
<li><a class="reference internal" href="#id66">Examples</a></li>
<li><a class="reference internal" href="#id67">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-inject"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">inject</span></code></a><ul>
<li><a class="reference internal" href="#id68">Synopsis</a></li>
<li><a class="reference internal" href="#id69">Examples</a></li>
<li><a class="reference internal" href="#id70">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-inject-argo-workflow"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">inject</span> <span class="pre">argo-workflow</span></code></a><ul>
<li><a class="reference internal" href="#id71">Synopsis</a></li>
<li><a class="reference internal" href="#id72">Examples</a></li>
<li><a class="reference internal" href="#id73">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-ls"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span></code></a><ul>
<li><a class="reference internal" href="#id74">Examples</a></li>
<li><a class="reference internal" href="#id75">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-ls-blobs"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">blobs</span></code></a><ul>
<li><a class="reference internal" href="#id76">Synopsis</a></li>
<li><a class="reference internal" href="#id77">Examples</a></li>
<li><a class="reference internal" href="#id78">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-ls-metadatas"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">metadatas</span></code></a><ul>
<li><a class="reference internal" href="#id79">Synopsis</a></li>
<li><a class="reference internal" href="#id80">Examples</a></li>
<li><a class="reference internal" href="#id81">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-ls-objects"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">ls</span> <span class="pre">objects</span></code></a><ul>
<li><a class="reference internal" href="#id82">Synopsis</a></li>
<li><a class="reference internal" href="#id83">Examples</a></li>
<li><a class="reference internal" href="#id84">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-manager"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">manager</span></code></a><ul>
<li><a class="reference internal" href="#id85">Examples</a></li>
<li><a class="reference internal" href="#id86">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-put"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">put</span></code></a><ul>
<li><a class="reference internal" href="#id87">Synopsis</a></li>
<li><a class="reference internal" href="#id88">Examples</a></li>
<li><a class="reference internal" href="#id89">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-schedule"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span></code></a><ul>
<li><a class="reference internal" href="#id90">Examples</a></li>
<li><a class="reference internal" href="#id91">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-schedule-workflow"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span> <span class="pre">workflow</span></code></a><ul>
<li><a class="reference internal" href="#id92">Synopsis</a></li>
<li><a class="reference internal" href="#id93">Examples</a></li>
<li><a class="reference internal" href="#id94">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vineyardctl-schedule-workload"><code class="docutils literal notranslate"><span class="pre">vineyardctl</span> <span class="pre">schedule</span> <span class="pre">workload</span></code></a><ul>
<li><a class="reference internal" href="#id95">Synopsis</a></li>
<li><a class="reference internal" href="#id96">Examples</a></li>
<li><a class="reference internal" href="#id97">Options</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=8a448e45"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=c7037924"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>